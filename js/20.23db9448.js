(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"194c":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"q-pa-lg"},[i("MultipleBreadcrumbs",{attrs:{"multiple-data":t.multipleData}}),i("q-card",{staticClass:"bg-grey-2"},[i("q-card",[i("q-table",{staticClass:"q-mb-none",attrs:{dense:"",data:t.disksInCluster,columns:t.inClusterColumns,"row-key":function(t){return t.name+"|"+t.sv_ip+"|"+t.uuid},"visible-columns":t.visibleInClusterColumns,filter:t.inClusterFilter,loading:t.changeLoading,selection:"multiple",selected:t.selectedInCluster,pagination:t.paginationInCluster,"selected-rows-label":function(e){return t.$t("selected_rows_label",{num:e})},"rows-per-page-label":t.$t("records_per_page")},on:{"update:selected":function(e){t.selectedInCluster=e},"row-click":t.onRowClick,"update:pagination":function(e){t.paginationInCluster=e}},scopedSlots:t._u([{key:"top",fn:function(){return[i("div",{staticClass:"row items-center q-my-md q-pa-sm bg-grey-2 col-12"},[i("div",{staticClass:" row q-gutter-x-md items-center"},[i("q-item-label",{staticClass:"col-auto"},[i("q-avatar",{staticClass:"q-mr-sm",attrs:{color:"white",size:"md","text-color":"primary",icon:"storage"}}),i("label",[t._v(" "+t._s(t.$t("disk.css_select"))+": ")])],1),i("q-select",{staticStyle:{"min-width":"150px"},attrs:{behavior:"menu",outlined:"","options-dense":"",options:t.dynamicChunkOptions,dense:"",square:""},on:{input:t.refreshList},model:{value:t.dynamicOptionModel,callback:function(e){t.dynamicOptionModel=e},expression:"dynamicOptionModel"}})],1),i("q-space"),i("div",{staticClass:"q-gutter-x-sm"},[i("label",{staticClass:"q-ml-md "},[t._v(" "+t._s(t.$t("disk.disk_all"))+": ")]),i("span",{staticClass:"text-bold text-primary"},[t._v(t._s(t.diskList.length))]),i("label",{staticClass:"q-ml-md"},[t._v("\n                "+t._s(t.$t("disk.disk_in_cluster"))+":\n              ")]),i("span",{staticClass:"text-bold text-primary"},[t._v(t._s(t.disksInCluster.length))]),i("label",{staticClass:"q-ml-md "},[t._v("\n                "+t._s(t.$t("disk.disk_not_in_cluster"))+":\n              ")]),i("span",{staticClass:"text-bold text-primary"},[t._v(t._s(t.disksNotInCluster.length))])])],1),i("q-separator"),i("h5",{staticClass:"q-my-sm col-12",staticStyle:{"min-width":"150px"},attrs:{outlined:"",dense:"","options-dense":""}},[t._v("\n            "+t._s(t.$t("disk.table_title"))+"\n          ")]),i("q-select",{staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":t.$t("columns"),"emit-value":"","map-options":"",options:t.filter_in_columns,"option-value":"name","options-cover":""},model:{value:t.visibleInClusterColumns,callback:function(e){t.visibleInClusterColumns=e},expression:"visibleInClusterColumns"}}),i("q-space"),i("div",{staticClass:"q-gutter-md"},[i("q-btn",{attrs:{disable:t.selectedInCluster.length<1,label:t.$t("remove"),color:"primary"},on:{click:function(e){return t.setModalControl("multiple_remove")}}}),i("q-btn",{attrs:{disable:t.selectedInCluster.length<1,label:t.$t("disk.migrate"),color:"primary"},on:{click:t.checkMigrateDisk}}),i("q-btn",{attrs:{disable:t.selectedInCluster.length<1,label:t.$t("disk.unmigrate"),color:"primary"},on:{click:t.checkUnigrateDisk}})],1)]},proxy:!0},{key:"body-cell-id",fn:function(e){return[i("q-td",{attrs:{props:e}},[t._v("\n            "+t._s(e.pageIndex+1)+"\n          ")])]}},{key:"body-cell-mountpoint",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("TableStateField",{attrs:{field:Boolean(e.row.mountpoint),stateInfo:t.mount_state_info}})],1)]}},{key:"body-cell-ex_migrate",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("TableStateField",{attrs:{field:e.row.ex_migrate,stateInfo:t.migrate_info}})],1)]}},{key:"body-cell-percent",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("q-linear-progress",{staticClass:"q-mt-sm",attrs:{rounded:"",size:"10px",color:"cyan",value:null!==t.getUsedPercent(e.row.space_total,e.row.space_used)?t.getUsedPercent(e.row.space_total,e.row.space_used):0}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col text-left"},[t._v("\n                "+t._s(t.percentFormat(t.getUsedPercent(e.row.space_total,e.row.space_used)))+"\n              ")]),i("div",{staticClass:"col text-right"},[t._v("\n                "+t._s(t.bytes2human(e.row.space_used))+" /\n                "+t._s(t.bytes2human(e.row.space_total))+"\n              ")])])],1)]}},{key:"body-cell-operation",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("q-btn",{staticStyle:{"background-color":"#fff"},attrs:{flat:"",color:"black",icon:"more_vert",dense:""}},[i("q-menu",[i("q-list",{staticStyle:{"min-width":"100px"}},[i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.showActionMigrate,expression:"showActionMigrate"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:t.isMounted(e.row.mountpoint)&&!t.isMigrate(e.row.ex_migrate)},on:{click:function(e){return t.setModalControl("migrate")}}},[i("q-item-section",{class:{"text-grey-6":!t.isMounted(e.row.mountpoint)||t.isMigrate(e.row.ex_migrate)}},[t._v(t._s(t.$t("disk.migrate")))])],1),i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.showActionUnMigrate,expression:"showActionUnMigrate"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:t.isMounted(e.row.mountpoint)&&t.isMigrate(e.row.ex_migrate)},on:{click:function(e){return t.setModalControl("unmigrate")}}},[i("q-item-section",{class:{"text-grey-6":!t.isMounted(e.row.mountpoint)||!t.isMigrate(e.row.ex_migrate)}},[t._v(t._s(t.$t("disk.unmigrate")))])],1),i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.showRemove,expression:"showRemove"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.setModalControl("remove")}}},[i("q-item-section",[t._v(t._s(t.$t("remove")))])],1)],1)],1)],1)],1)]}}])},[i("TableNoData",{attrs:{slot:"no-data",filter:t.inClusterFilter,loading:t.changeLoading},slot:"no-data"})],1)],1),i("q-card",[i("q-table",{staticClass:"q-mt-md",attrs:{dense:"",data:t.disksNotInCluster,columns:t.notInClusterColumns,"row-key":function(t){return t.name+"|"+t.sv_ip+"|"+t.uuid},"visible-columns":t.visibleNotInClusterColumns,filter:t.notInClusterFilter,loading:t.changeLoading,selection:"multiple",selected:t.selectedNotInCluster,pagination:t.paginationNotInCluster,"selected-rows-label":function(e){return t.$t("selected_rows_label",{num:e})},"rows-per-page-label":t.$t("records_per_page")},on:{"update:selected":function(e){t.selectedNotInCluster=e},"row-click":t.onRowClick,"update:pagination":function(e){t.paginationNotInCluster=e}},scopedSlots:t._u([{key:"top",fn:function(){return[i("h5",{staticClass:"q-my-sm col-12",staticStyle:{"min-width":"150px"},attrs:{outlined:"",dense:"","options-dense":""}},[t._v("\n            "+t._s(t.$t("disk.not_in_table_title"))+"\n          ")]),i("q-select",{staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":t.$t("columns"),"emit-value":"","map-options":"",options:t.filter_in_columns,"option-value":"name","options-cover":""},model:{value:t.visibleNotInClusterColumns,callback:function(e){t.visibleNotInClusterColumns=e},expression:"visibleNotInClusterColumns"}}),i("q-space"),i("div",{staticClass:"q-gutter-x-md"},[i("q-btn",{attrs:{disable:t.selectedNotInCluster.length<1,label:t.$t("add"),color:"primary"},on:{click:t.checkAddDisk}}),i("q-btn",{attrs:{disable:t.selectedNotInCluster.length<1,label:t.$t("disk.format"),color:"primary"},on:{click:t.checkFormatDisk}}),i("q-btn",{attrs:{disable:t.selectedNotInCluster.length<1,label:t.$t("disk.mount"),color:"primary"},on:{click:t.checkMountDisk}}),i("q-btn",{attrs:{disable:t.selectedNotInCluster.length<1,label:t.$t("disk.umount"),color:"primary"},on:{click:t.checkUnMountDisk}})],1)]},proxy:!0},{key:"body-cell-id",fn:function(e){return[i("q-td",{attrs:{props:e}},[t._v("\n            "+t._s(e.pageIndex+1)+"\n          ")])]}},{key:"body-cell-mountpoint",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("TableStateField",{attrs:{field:Boolean(e.row.mountpoint),stateInfo:t.mount_state_info}})],1)]}},{key:"body-cell-is_formatting",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("TableStateField",{attrs:{field:e.value,stateInfo:t.formatting_info}})],1)]}},{key:"body-cell-operation",fn:function(e){return[i("q-td",{attrs:{props:e}},["damaged"!==e.row.state?i("q-btn",{staticStyle:{"background-color":"#fff"},attrs:{flat:"",color:"black",icon:"more_vert",dense:""}},[i("q-menu",[i("q-list",{staticStyle:{"min-width":"100px"}},[i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.showActionAdd,expression:"showActionAdd"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:t.isMounted(e.row.mountpoint)},on:{click:function(e){return t.setModalControl("add")}}},[i("q-item-section",{class:{"text-grey-6":!t.isMounted(e.row.mountpoint)}},[t._v(t._s(t.$t("add")))])],1),i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.showActionFormat,expression:"showActionFormat"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:!t.isMounted(e.row.mountpoint)},on:{click:function(e){return t.setModalControl("format")}}},[i("q-item-section",{class:{"text-grey-6":t.isMounted(e.row.mountpoint)}},[t._v(t._s(t.$t("disk.format")))])],1),i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.showActionWipefs,expression:"showActionWipefs"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:!t.isMounted(e.row.mountpoint)&&t.hasFsType(e.row.fstype)},on:{click:function(e){return t.setModalControl("wipefs")}}},[i("q-item-section",{class:{"text-grey-6":t.isMounted(e.row.mountpoint)||!t.hasFsType(e.row.fstype)}},[t._v(t._s(t.$t("disk.wipefs")))])],1),i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.showActionMount,expression:"showActionMount"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:!t.isMounted(e.row.mountpoint)&&t.hasFsType(e.row.fstype)},on:{click:function(e){return t.setModalControl("mount")}}},[i("q-item-section",{class:{"text-grey-6":t.isMounted(e.row.mountpoint)||!t.hasFsType(e.row.fstype)}},[t._v(t._s(t.$t("disk.mount")))])],1),i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.showActionUmount,expression:"showActionUmount"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:t.isMounted(e.row.mountpoint)},on:{click:function(e){return t.setModalControl("umount")}}},[i("q-item-section",{class:{"text-grey-6":!t.isMounted(e.row.mountpoint)}},[t._v(t._s(t.$t("disk.umount")))])],1)],1)],1)],1):t._e()],1)]}}])},[i("TableNoData",{attrs:{slot:"no-data",filter:t.notInClusterFilter,loading:t.changeLoading},slot:"no-data"})],1)],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:t.operationModalControl,callback:function(e){t.operationModalControl=e},expression:"operationModalControl"}},[i("q-card",{staticStyle:{"min-width":"300px"}},[i("q-card-section",[i("div",{staticClass:"text-h6 text-weight-bold"},[t._v(t._s(t.dialog_title))])]),i("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!("format"==t.action||"multiple_format"===t.action),expression:"!(action == 'format' || action === 'multiple_format')"}],staticClass:"q-pt-none"},[i("span",{staticClass:"q-ml-sm"},[i("i18n",{attrs:{path:t.dialog_reconfirm}},[i("span",{staticStyle:{"font-weight":"bold"},attrs:{place:t.dialog_place}},[t._v(t._s(t.select_field))])])],1)]),"format"===t.action||"multiple_format"===t.action?i("q-card-section",{staticClass:"q-pt-none"},[i("q-select",{staticStyle:{"min-width":"150px"},attrs:{behavior:"menu",outlined:"","options-dense":"",options:t.fsTypeOptions,label:t.$t("disk.fstype"),dense:"",square:""},model:{value:t.fstype_model,callback:function(e){t.fstype_model=e},expression:"fstype_model"}})],1):t._e(),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("cancel"),color:"orange"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.dialog_action,color:"red"},on:{click:t.diskAction}})],1)],1)],1)],1)},n=[],a=i("2f62"),o=i("73ec"),r=i("7ffc"),l=i("4d91"),c=i("2ef0"),u=i.n(c),d=i("2a19"),m=function(){return m=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},m.apply(this,arguments)},p=function(t,e,i,s){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,a){function o(t){try{l(s.next(t))}catch(e){a(e)}}function r(t){try{l(s["throw"](t))}catch(e){a(e)}}function l(t){t.done?i(t.value):n(t.value).then(o,r)}l((s=s.apply(t,e||[])).next())}))},_=function(t,e){var i,s,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(t){return function(e){return l([t,e])}}function l(a){if(i)throw new TypeError("Generator is already executing.");while(o)try{if(i=1,s&&(n=2&a[0]?s["return"]:a[0]?s["throw"]||((n=s["return"])&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!(n=n.length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(r){a=[6,r],s=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},h={name:"DiskPage",components:{},preFetch:function(t){var e=t.store;return p(this,void 0,void 0,(function(){var t,i,s,n;return _(this,(function(a){switch(a.label){case 0:return[4,e.dispatch("getChunkOptions")];case 1:return t=a.sent(),i=t.css_maps,s=t.css_uuids,n={css_maps:i,css_uuids:s,condition:{}},i.length>0&&s.length>0&&e.dispatch("getDisks",n),[2]}}))}))},setup:function(){var t=["id","name","fstype","sv_ip","uuid","mountpoint","state","ex_is_used","ex_migrate","ex_last_error","ex_status","ex_chunks","percent"],e=["id","name","sv_ip","fstype","uuid","mountpoint","state","ex_is_used","ex_last_error","ex_status","is_formatting","size"];return(Object(o["b"])(r["a"].disk_detail)||Object(o["b"])(r["a"].disk_action_mount)||Object(o["b"])(r["a"].disk_action_remove)||Object(o["b"])(r["a"].disk_action_migrate)||Object(o["b"])(r["a"].disk_action_iostat))&&t.push("operation"),(Object(o["b"])(r["a"].disk_detail)||Object(o["b"])(r["a"].disk_action_format)||Object(o["b"])(r["a"].disk_action_mount)||Object(o["b"])(r["a"].disk_action_add)||Object(o["b"])(r["a"].disk_action_umount)||Object(o["b"])(r["a"].disk_action_wipefs)||Object(o["b"])(r["a"].disk_action_iostat))&&e.push("operation"),{visibleInClusterColumns:t,visibleNotInClusterColumns:e}},created:function(){},destroyed:function(){clearInterval(this.timer)},computed:m(m(m({},Object(a["e"])({diskList:function(t){return t.disks.disk_list},disksInCluster:function(t){return t.disks.disks_in_cluster},disksNotInCluster:function(t){return t.disks.disks_not_in_cluster}})),Object(a["c"])(["getDiskLoading"])),{showDetail:function(){return Object(o["b"])(r["a"].disk_detail)},showActionFormat:function(){return Object(o["b"])(r["a"].disk_action_format)},showActionMount:function(){return Object(o["b"])(r["a"].disk_action_mount)},showActionAdd:function(){return Object(o["b"])(r["a"].disk_action_add)},showActionMigrate:function(){return Object(o["b"])(r["a"].disk_action_migrate)},showActionUnMigrate:function(){return Object(o["b"])(r["a"].disk_action_unmigrate)},showRemove:function(){return Object(o["b"])(r["a"].disk_action_remove)},showActionUmount:function(){return Object(o["b"])(r["a"].disk_action_umount)},showActionWipefs:function(){return Object(o["b"])(r["a"].disk_action_wipefs)},showActionIostat:function(){return Object(o["b"])(r["a"].disk_action_iostat)},filter_in_columns:function(){return this.inClusterColumns.filter((function(t){return"operation"!==t.name&&"id"!==t.name}))},filter_not_in_columns:function(){return this.notInClusterColumns.filter((function(t){return"operation"!==t.name&&"id"!==t.name}))},inClusterColumns:function(){var t=[{name:"id",label:"#",field:"id",align:"left",style:"width: 2%"},{name:"name",label:this.$t("disk.name"),field:"name",align:"left"},{name:"model",label:this.$t("disk.model"),field:"model",align:"center"},{name:"serial",label:this.$t("disk.serial"),field:"serial",align:"center"},{name:"type",label:this.$t("disk.type"),field:"type",align:"center"},{name:"fstype",label:this.$t("disk.fstype"),field:"fstype",align:"center"},{name:"sv_ip",label:this.$t("disk.sv_ip"),field:"sv_ip",align:"center"},{name:"uuid",label:this.$t("disk.uuid"),field:"uuid",align:"center"},{name:"state",label:this.$t("disk.state"),field:"state",align:"center"},{name:"rota",label:this.$t("disk.rota"),field:"rota",align:"center",format:function(t){return 0==t?"SSD":1==t?"HDD":"-"}},{name:"mountpoint",label:this.$t("disk.mountpoint"),field:"mountpoint",align:"center"},{name:"ex_migrate",label:this.$t("disk.ex_migrate"),field:"ex_migrate",align:"center"},{name:"ex_last_error",label:this.$t("disk.ex_last_error"),field:"ex_last_error",align:"center"},{name:"ex_status",label:this.$t("disk.ex_status"),field:"ex_status",align:"center"},{name:"ex_chunks",label:this.$t("disk.ex_chunks"),field:"ex_chunks",align:"center"},{name:"percent",label:this.$t("disk.size"),field:"percent",align:"center",headerStyle:"width: 250px"},{name:"operation",label:this.$t("operation"),field:"operation",headerStyle:"width: 20px",align:"center"}];return t},notInClusterColumns:function(){var t=[{name:"id",label:"#",field:"id",align:"left",style:"width: 2%"},{name:"name",label:this.$t("disk.name"),field:"name",align:"left"},{name:"model",label:this.$t("disk.model"),field:"model",align:"center"},{name:"serial",label:this.$t("disk.serial"),field:"serial",align:"center"},{name:"type",label:this.$t("disk.type"),field:"type",align:"center"},{name:"fstype",label:this.$t("disk.fstype"),field:"fstype",align:"center"},{name:"sv_ip",label:this.$t("disk.sv_ip"),field:"sv_ip",align:"center"},{name:"uuid",label:this.$t("disk.uuid"),field:"uuid",align:"center"},{name:"state",label:this.$t("disk.state"),field:"state",align:"center"},{name:"rota",label:this.$t("disk.rota"),field:"rota",align:"center",format:function(t){return 0==t?"SSD":1==t?"HDD":"-"}},{name:"mountpoint",label:this.$t("disk.mountpoint"),field:"mountpoint",align:"center"},{name:"is_formatting",label:this.$t("disk.is_formatting"),field:"is_formatting",align:"center",format:function(t,e){return t?"is_formatting":e.fstype?"formatted":"unformatted"}},{name:"ex_last_error",label:this.$t("disk.ex_last_error"),field:"ex_last_error",align:"center"},{name:"ex_status",label:this.$t("disk.ex_status"),field:"ex_status",align:"center"},{name:"size",label:this.$t("disk.size"),field:"size",align:"center",format:function(t){return Object(o["a"])(t)}},{name:"operation",label:this.$t("operation"),field:"operation",headerStyle:"width: 20px",align:"center"}];return t},changeLoading:function(){return!!this.getDiskLoading},multipleData:function(){var t=[{icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.cluster_manager"),icon:"icon_cluster_manager",to:"/cluster_manager/disk_manager",call:this.refreshList},{label:this.$t("breadCrumbs.disk.page")}];return t},dynamicChunkOptions:function(){var t=u.a.cloneDeep(this.chunkOptions);return t.push({label:l["b"].t("disk.show_all"),value:this.css_uuids}),t},dynamicOptionModel:{get:function(){return this.option_model.label,l["b"].t("disk.show_all"),this.option_model},set:function(t){this.option_model=t}},getUsedPercent:function(){return function(t,e){return e<t&&t>0&&e>=0?Math.floor(e/t*1e3)/1e3:null}},percentFormat:function(){return function(t){return null!==t?(100*t).toFixed(1)+"%":"0"}}}),data:function(){var t=u.a.cloneDeep(this.$store.state.services.chunk_options),e=[];t.map((function(t){e.push(t.value[0])}));var i={label:l["b"].t("disk.show_all"),value:e};return{css_uuids:e,chunkOptions:t,option_model:i,operationModalControl:!1,dialog_title:"",dialog_reconfirm:"",dialog_place:"",dialog_action:"",select_field:"",action:"",fsTypeOptions:["ext4","xfs","btrfs"],fstype_model:"xfs",selectedInCluster:[],selectedNotInCluster:[],inClusterFilter:"",notInClusterFilter:"",mount_state_info:[{state:"nofs",color:"deep-orange",value:l["b"].t("disk.status_nofs")},{state:!0,color:"green",value:l["b"].t("disk.status_mounted")},{state:!1,color:"grey",value:l["b"].t("disk.status_umount")},{state:"damaged",color:"dark",value:l["b"].t("disk.status_damaged")}],migrate_info:[{state:!0,color:"green",value:l["b"].t("disk.migrated")},{state:!1,color:"grey",value:l["b"].t("disk.not_migrate")}],formatting_info:[{state:"is_formatting",color:"deep-orange",has_oval:!0,value:l["b"].t("disk.formatting")},{state:"formatted",color:"green",value:l["b"].t("disk.formatted")},{state:"unformatted",color:"yellow-10",value:l["b"].t("disk.unformatted")}],paginationInCluster:{page:1,rowsPerPage:0},paginationNotInCluster:{page:1,rowsPerPage:0}}},methods:m(m(m({},Object(a["d"])(["SET_DISK_LIST","SET_SELECT_DISK_ROW"])),Object(a["b"])(["getChunkOptions","getDisks","addDiskToService","mountDisk","migrateDisk","unMigrateDisk","formatDisk","removeDisk","umountDisk","wipeFsDisk"])),{onRowClick:function(t,e,i){this.selectRow=e,this.$store.commit("SET_SELECT_DISK_ROW",e)},bytes2human:function(t){return Object(o["a"])(t)},setModalControl:function(t){switch(this.operationModalControl=!0,this.action=t,t){case"format":this.dialog_title=l["b"].t("disk.format"),this.dialog_reconfirm="disk.format_reconfirm",this.dialog_place="name",this.dialog_action=l["b"].t("disk.format"),this.select_field=this.selectRow.name;break;case"wipefs":this.dialog_title=l["b"].t("disk.wipefs"),this.dialog_reconfirm="disk.wipefs_reconfirm",this.dialog_place="name",this.dialog_action=l["b"].t("disk.wipefs"),this.select_field=this.selectRow.name;break;case"mount":this.dialog_title=l["b"].t("disk.mount"),this.dialog_reconfirm="disk.mount_reconfirm",this.dialog_place="name",this.dialog_action=l["b"].t("disk.mount"),this.select_field=this.selectRow.name;break;case"umount":this.dialog_title=l["b"].t("disk.umount"),this.dialog_reconfirm="disk.umount_reconfirm",this.dialog_place="name",this.dialog_action=l["b"].t("disk.umount"),this.select_field=this.selectRow.name;break;case"add":this.dialog_title=l["b"].t("add"),this.dialog_reconfirm="disk.add_reconfirm",this.dialog_place="name",this.dialog_action=l["b"].t("add"),this.select_field=this.selectRow.name;break;case"remove":this.dialog_title=l["b"].t("remove"),this.dialog_reconfirm="disk.remove_reconfirm",this.dialog_place="name",this.dialog_action=l["b"].t("remove"),this.select_field=this.selectRow.name;break;case"migrate":this.dialog_title=l["b"].t("disk.migrate"),this.dialog_reconfirm="disk.migrate_reconfirm",this.dialog_place="name",this.dialog_action=l["b"].t("disk.migrate"),this.select_field=this.selectRow.name;break;case"unmigrate":this.dialog_title=l["b"].t("disk.unmigrate"),this.dialog_reconfirm="disk.unmigrate_reconfirm",this.dialog_place="name",this.dialog_action=l["b"].t("disk.unmigrate"),this.select_field=this.selectRow.name;break;case"multiple_remove":this.dialog_title=l["b"].t("disk.multiple_remove_disk"),this.dialog_reconfirm="disk.multiple_remove_disk_reconfirm",this.dialog_action=l["b"].t("disk.multiple_remove_disk");break;case"multiple_migrate":this.dialog_title=l["b"].t("disk.multiple_migrate_disk"),this.dialog_reconfirm="disk.multiple_migrate_disk_reconfirm",this.dialog_action=l["b"].t("disk.multiple_migrate_disk");break;case"multiple_unmigrate":this.dialog_title=l["b"].t("disk.multiple_unmigrate_disk"),this.dialog_reconfirm="disk.multiple_unmigrate_disk_reconfirm",this.dialog_action=l["b"].t("disk.multiple_unmigrate_disk");break;case"multiple_add":this.dialog_title=l["b"].t("disk.multiple_add_disk"),this.dialog_reconfirm="disk.multiple_add_disk_reconfirm",this.dialog_action=l["b"].t("disk.multiple_add_disk");break;case"multiple_format":this.dialog_title=l["b"].t("disk.multiple_format_disk"),this.dialog_reconfirm="disk.multiple_format_disk_reconfirm",this.dialog_action=l["b"].t("disk.multiple_format_disk");break;case"multiple_mount":this.dialog_title=l["b"].t("disk.multiple_mount_disk"),this.dialog_reconfirm="disk.multiple_mount_disk_reconfirm",this.dialog_action=l["b"].t("disk.multiple_mount_disk");break;case"multiple_umount":this.dialog_title=l["b"].t("disk.multiple_umount_disk"),this.dialog_reconfirm="disk.multiple_umount_disk_reconfirm",this.dialog_action=l["b"].t("disk.multiple_umount_disk");break}},isMounted:function(t){return Boolean(t)},isMigrate:function(t){return Boolean(t)},hasFsType:function(t){return Boolean(t)},refreshList:function(){return p(this,void 0,void 0,(function(){var t,e;return _(this,(function(i){switch(i.label){case 0:return t=this.option_model.value,e={css_maps:this.$store.state.services.css_maps,css_uuids:t,condition:{}},[4,this.$store.dispatch("getDisks",e)];case 1:return i.sent(),this.selectedInCluster=[],this.selectedNotInCluster=[],[2]}}))}))},diskAction:function(){var t,e;return p(this,void 0,void 0,(function(){var i,s;return _(this,(function(n){switch(n.label){case 0:switch(i={css_uuid:null===(t=this.selectRow)||void 0===t?void 0:t.css_uuid,dev_name:null===(e=this.selectRow)||void 0===e?void 0:e.name},s=this.action,s){case"format":return[3,1];case"wipefs":return[3,3];case"mount":return[3,5];case"umount":return[3,7];case"add":return[3,9];case"remove":return[3,11];case"migrate":return[3,13];case"unmigrate":return[3,15];case"multiple_remove":return[3,17];case"multiple_migrate":return[3,19];case"multiple_unmigrate":return[3,21];case"multiple_add":return[3,23];case"multiple_format":return[3,25];case"multiple_mount":return[3,27];case"multiple_umount":return[3,29];case"multiple_remove":return[3,31]}return[3,33];case 1:return i["data"]={fs_type:this.fstype_model},this.selectRow.is_formatting="is_formatting",[4,this.$store.dispatch("formatDisk",i)];case 2:return n.sent(),[3,33];case 3:return[4,this.$store.dispatch("wipeFsDisk",i)];case 4:return n.sent(),[3,33];case 5:return[4,this.$store.dispatch("mountDisk",i)];case 6:return n.sent(),[3,33];case 7:return[4,this.$store.dispatch("umountDisk",i)];case 8:return n.sent(),[3,33];case 9:return i["data"]={vol_uuid_list:[this.selectRow.uuid]},[4,this.$store.dispatch("addDiskToService",i)];case 10:return n.sent(),[3,33];case 11:return i["data"]={vol_uuid_list:[this.selectRow.uuid]},[4,this.$store.dispatch("removeDisk",i)];case 12:return n.sent(),[3,33];case 13:return i["data"]={vol_uuid_list:[this.selectRow.uuid]},[4,this.$store.dispatch("migrateDisk",i)];case 14:return n.sent(),[3,33];case 15:return i["data"]={vol_uuid_list:[this.selectRow.uuid]},[4,this.$store.dispatch("cancelMigrate",i)];case 16:return n.sent(),[3,33];case 17:return[4,this.multipleRemoveDisk()];case 18:return n.sent(),[3,33];case 19:return[4,this.multipleMigrateDisk()];case 20:return n.sent(),[3,33];case 21:return[4,this.multipleUnmigrateDisk()];case 22:return n.sent(),[3,33];case 23:return[4,this.multipleAddDisk()];case 24:return n.sent(),[3,33];case 25:return[4,this.multipleFormatDisk()];case 26:return n.sent(),[3,33];case 27:return[4,this.multipleMountDisk()];case 28:return n.sent(),[3,33];case 29:return[4,this.multipleUmountDisk()];case 30:return n.sent(),[3,33];case 31:return[4,this.multipleRemoveDisk()];case 32:return n.sent(),[3,33];case 33:return[4,this.refreshList()];case 34:return n.sent(),[2]}}))}))},diskDetail:function(t,e,i){return p(this,void 0,void 0,(function(){var s;return _(this,(function(n){return 0==e.length?(s="00000000-0000-4000-8000-000000000000",this.$router.push({path:"disk_manager/detail",query:{node_ip:t,id:s,dev:i}})):this.$router.push({path:"disk_manager/detail",query:{node_ip:t,id:e,dev:i}}),[2]}))}))},hasMount:function(){var t=!1;return this.selectedNotInCluster.map((function(e){Boolean(e.mountpoint)&&(t=!0)})),t},hasUnmount:function(){var t=!1;return this.selectedNotInCluster.map((function(e){Boolean(e.mountpoint)||(t=!0)})),t},hasMigrated:function(){var t=!1;return this.selectedInCluster.map((function(e){e.ex_migrate&&(t=!0)})),t},hasUnmigrate:function(){var t=!1;return this.selectedInCluster.map((function(e){e.ex_migrate||(t=!0)})),t},getOptionsLabel:function(t){var e="",i=this.$store.state.services.chunk_options;return i.map((function(i){(null===i||void 0===i?void 0:i.value[0])===t&&(e=i.label)})),e},multipleRemoveDisk:function(){return p(this,void 0,void 0,(function(){var t,e,i,s,n,a;return _(this,(function(o){switch(o.label){case 0:for(i in t={},this.selectedInCluster.map((function(e){t[e.css_uuid]=new Array})),this.selectedInCluster.map((function(e){t[e.css_uuid].push(e.uuid)})),e=[],t)e.push(i);s=0,o.label=1;case 1:return s<e.length?(n=e[s],a={css_uuid:n,data:{vol_uuid_list:t[n]},css_ip:this.getOptionsLabel(n)},[4,this.$store.dispatch("removeDisk",a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},checkMigrateDisk:function(){this.hasMigrated()?d["a"].create({position:"top",type:"warning",message:""+l["b"].t("disk.has_migrated_multiple_disk_hint")}):this.setModalControl("multiple_migrate")},multipleMigrateDisk:function(){return p(this,void 0,void 0,(function(){var t,e,i,s,n,a;return _(this,(function(o){switch(o.label){case 0:for(i in t={},this.selectedInCluster.map((function(e){t[e.css_uuid]=new Array})),this.selectedInCluster.map((function(e){t[e.css_uuid].push(e.uuid)})),e=[],t)e.push(i);s=0,o.label=1;case 1:return s<e.length?(n=e[s],a={css_uuid:n,data:{vol_uuid_list:t[n]},css_ip:this.getOptionsLabel(n)},[4,this.$store.dispatch("migrateDisk",a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},checkUnigrateDisk:function(){this.hasUnmigrate()?d["a"].create({position:"top",type:"warning",message:""+l["b"].t("disk.has_unmigrate_multiple_disk_hint")}):this.setModalControl("multiple_unmigrate")},multipleUnmigrateDisk:function(){return p(this,void 0,void 0,(function(){var t,e,i,s,n,a;return _(this,(function(o){switch(o.label){case 0:for(i in t={},this.selectedInCluster.map((function(e){t[e.css_uuid]=new Array})),this.selectedInCluster.map((function(e){t[e.css_uuid].push(e.uuid)})),e=[],t)e.push(i);s=0,o.label=1;case 1:return s<e.length?(n=e[s],a={css_uuid:n,data:{vol_uuid_list:t[n]},css_ip:this.getOptionsLabel(n)},[4,this.$store.dispatch("cancelMigrate",a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},checkAddDisk:function(){this.hasUnmount()?d["a"].create({position:"top",type:"warning",message:""+l["b"].t("disk.has_umount_multiple_disk_hint")}):this.setModalControl("multiple_add")},multipleAddDisk:function(){return p(this,void 0,void 0,(function(){var t,e,i,s,n,a;return _(this,(function(o){switch(o.label){case 0:for(i in t={},this.selectedNotInCluster.map((function(e){t[e.css_uuid]=new Array})),this.selectedNotInCluster.map((function(e){Boolean(e.mountpoint)?t[e.css_uuid].push(e.uuid):d["a"].create({position:"top",type:"warning",message:""+l["b"].t("disk.has_umount_multiple_disk_hint")})})),e=[],t)e.push(i);s=0,o.label=1;case 1:return s<e.length?(n=e[s],a={css_uuid:n,data:{vol_uuid_list:t[n]},css_ip:this.getOptionsLabel(n)},[4,this.$store.dispatch("addDiskToService",a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},checkFormatDisk:function(){this.hasMount()?d["a"].create({position:"top",type:"warning",message:""+l["b"].t("disk.has_mount_multiple_disk_hint")}):this.setModalControl("multiple_format")},multipleFormatDisk:function(){return p(this,void 0,void 0,(function(){var t=this;return _(this,(function(e){switch(e.label){case 0:return[4,Promise.all(this.selectedNotInCluster.map((function(e){return p(t,void 0,void 0,(function(){var t;return _(this,(function(i){switch(i.label){case 0:return t={css_uuid:e.css_uuid,dev_name:e.name,data:{fs_type:this.fstype_model}},e.is_formatting="is_formatting",[4,this.$store.dispatch("formatDisk",t)];case 1:return i.sent(),[2]}}))}))})))];case 1:return e.sent(),[2]}}))}))},checkMountDisk:function(){this.hasMount()?d["a"].create({position:"top",type:"warning",message:""+l["b"].t("disk.has_mount_multiple_disk_hint")}):this.setModalControl("multiple_mount")},multipleMountDisk:function(){return p(this,void 0,void 0,(function(){var t=this;return _(this,(function(e){switch(e.label){case 0:return[4,Promise.all(this.selectedNotInCluster.map((function(e){return p(t,void 0,void 0,(function(){var t;return _(this,(function(i){switch(i.label){case 0:return t={css_uuid:e.css_uuid,dev_name:e.name},[4,this.$store.dispatch("mountDisk",t)];case 1:return i.sent(),[2]}}))}))})))];case 1:return e.sent(),[2]}}))}))},checkUnMountDisk:function(){this.hasUnmount()?d["a"].create({position:"top",type:"warning",message:""+l["b"].t("disk.has_umount_multiple_disk_hint")}):this.setModalControl("multiple_umount")},multipleUmountDisk:function(){return p(this,void 0,void 0,(function(){var t=this;return _(this,(function(e){switch(e.label){case 0:return[4,Promise.all(this.selectedNotInCluster.map((function(e){return p(t,void 0,void 0,(function(){var t;return _(this,(function(i){switch(i.label){case 0:return t={css_uuid:e.css_uuid,dev_name:e.name},[4,this.$store.dispatch("umountDisk",t)];case 1:return i.sent(),[2]}}))}))})))];case 1:return e.sent(),[2]}}))}))}})},f=h,k=(i("7d49"),i("2877")),g=i("9989"),b=i("f09f"),v=i("eaac"),w=i("0170"),y=i("cb32"),C=i("ddd8"),x=i("2c91"),q=i("eb85"),$=i("9c40"),M=i("db86"),I=i("6b1d"),D=i("4e73"),O=i("1c1c"),N=i("66e5"),S=i("4074"),A=i("24e8"),j=i("a370"),F=i("4b7e"),R=i("7f67"),T=i("eebe"),L=i.n(T),U=Object(k["a"])(f,s,n,!1,null,null,null);e["default"]=U.exports;L()(U,"components",{QPage:g["a"],QCard:b["a"],QTable:v["a"],QItemLabel:w["a"],QAvatar:y["a"],QSelect:C["a"],QSpace:x["a"],QSeparator:q["a"],QBtn:$["a"],QTd:M["a"],QLinearProgress:I["a"],QMenu:D["a"],QList:O["a"],QItem:N["a"],QItemSection:S["a"],QDialog:A["a"],QCardSection:j["a"],QCardActions:F["a"]}),L()(U,"directives",{ClosePopup:R["a"]})},"7d49":function(t,e,i){"use strict";i("d08d")},d08d:function(t,e,i){}}]);