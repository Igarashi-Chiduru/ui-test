(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{"179c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"q-pa-lg"},[s("MultipleBreadcrumbs",{attrs:{"multiple-data":t.multipleData}}),s("q-table",{staticClass:"q-mb-none",style:t.allTrashList.length>0?"height: 700px":"",attrs:{data:t.allTrashList,columns:t.columns,"row-key":"name","visible-columns":t.visibleColumns,filter:t.filter,loading:t.getTrashLoading,"table-colspan":"12","overflow-hidden":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,pagination:t.pagination,"rows-per-page-options":[0]},on:{"row-click":t.onRowClick,"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top",fn:function(){return[s("h5",{staticClass:"q-mt-none",staticStyle:{"min-width":"150px"},attrs:{outlined:"",dense:"","options-dense":""}},[t._v("\n        "+t._s(t.$t("trashfile.table_title"))+"\n      ")]),s("q-space"),s("div",{staticClass:"q-pa-md"},[s("q-btn",{attrs:{unelevated:"",color:"primary",label:t.$t("trashfile.empty")},on:{click:function(e){t.cleanUpControl=!t.cleanUpControl}}},[s("q-icon",{staticClass:"material-icons-outlined items-start q-ml-xs",attrs:{name:"delete_outline",size:"1.4em"}})],1)],1)]},proxy:!0},{key:"body-cell-path",fn:function(e){return[s("q-td",{attrs:{props:e}},[s("div",{staticClass:" row items-center justify-start"},[s("span",{ref:"fileLength",staticClass:"q-ml-sm",staticStyle:{color:"#005980"}},[t._v("\n            "+t._s(t.get_sub_name(e.row.name))+"\n          ")]),s("q-tooltip",{attrs:{anchor:"bottom start",self:"top left"}},[t._v("\n            "+t._s(e.row.name)+"\n          ")])],1)])]}},{key:"body-cell-name",fn:function(e){return[s("q-td",{attrs:{props:e}},[s("div",{staticClass:" row items-center justify-start"},[s("div",[s("q-icon",{staticClass:"material-icons-outlined",attrs:{name:"description",size:"1.5em"}}),s("span",{ref:"fileLength",staticClass:"q-ml-sm",staticStyle:{color:"#005980"}},[t._v("\n              "+t._s(t.get_sub_name(e.row.name))+"\n            ")])],1),s("q-tooltip",[t._v("\n            "+t._s(e.row.name)+"\n          ")])],1)])]}},{key:"body-cell-operation",fn:function(e){return[s("q-td",{key:"operation",attrs:{props:e}},[s("q-btn",{attrs:{flat:"",icon:"more_vert",color:"black"}},[s("q-menu",{attrs:{"auto-close":""}},[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",{attrs:{clickable:""},on:{click:t.getDetailInfo}},[s("q-item-section",[t._v(t._s(t.$t("trashfile.file_info")))])],1),s("q-item",{attrs:{clickable:""},on:{click:t.restoreFile}},[s("q-item-section",[t._v(t._s(t.$t("trashfile.restore")))])],1),s("q-item",{attrs:{clickable:""},on:{click:function(e){t.unlinkControl=!t.unlinkControl}}},[s("q-item-section",[t._v(t._s(t.$t("delete")))])],1),s("q-item",{attrs:{clickable:""},on:{click:function(e){t.setTrashTimeControl=!t.setTrashTimeControl}}},[s("q-item-section",[t._v(t._s(t.$t("trashfile.set_trashtime")))])],1)],1)],1)],1)],1)]}},t.showMore?{key:"bottom-row",fn:function(){return[s("q-tr",{staticClass:"cursor-pointer ",on:{click:t.loadMore}},[s("q-td",{attrs:{colspan:"100%"}},[s("span",{staticClass:"text-primary q-ml-lg"},[t._v(t._s(t.$t("filesystem.load_more")))])])],1)]},proxy:!0}:null],null,!0)},[s("TableNoData",{attrs:{slot:"no-data",filter:t.filter,loading:t.getTrashLoading},slot:"no-data"})],1),s("q-dialog",{model:{value:t.setTrashTimeControl,callback:function(e){t.setTrashTimeControl=e},expression:"setTrashTimeControl"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("div",{staticClass:"text-h6"},[t._v(t._s(t.$t("trashfile.set_trashtime")))]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-form",{on:{submit:t.setTrashTime,reset:t.onReset}},[s("q-card-section",{staticClass:"row justify-center",staticStyle:{"min-width":"400px"}},[s("div",{staticClass:"col-sm-12 col-xs-11 q-gutter-md"},[s("q-input",{staticClass:"q-pb-sm",attrs:{label:t.$t("trashfile.set_trashtime_input"),outlined:"",type:"number",dense:"",square:"",clearable:"","lazy-rules":"",rules:[function(e){return e&&e>0&&e<=8760&&e%1===0||t.$t("trashfile.set_trashtime_input_hint")}]},model:{value:t.form.trashtime,callback:function(e){t.$set(t.form,"trashtime",e)},expression:"form.trashtime"}}),s("div",{staticClass:"text-right"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-sm no-border-radius",attrs:{outline:"",unelevated:"",label:t.$t("cancel"),type:"reset",color:"grey-6"}}),s("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",label:t.$tc("submit",1),type:"submit",color:"primary"}})],1)],1)])],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.unlinkControl,callback:function(e){t.unlinkControl=e},expression:"unlinkControl"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6 text-weight-bold"},[t._v(t._s(t.$t("delete")))])]),s("q-card-section",{staticClass:"q-pt-none",staticStyle:{"min-width":"300px"}},[s("span",{staticClass:"q-ml-sm"},[s("i18n",{attrs:{path:"trashfile.reconfirm"}},[s("span",{staticStyle:{"font-weight":"bold"},attrs:{place:"file_name"}},[t._v(t._s(t.selectRow.name))])])],1)]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("cancel"),color:"orange"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("delete"),color:"red"},on:{click:t.unlinkFile}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.cleanUpControl,callback:function(e){t.cleanUpControl=e},expression:"cleanUpControl"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6 text-weight-bold"},[t._v("\n          "+t._s(t.$t("trashfile.clean"))+"\n        ")])]),s("q-card-section",{staticClass:"q-pt-none",staticStyle:{"min-width":"300px"}},[s("span",{staticClass:"q-ml-sm"},[s("i18n",{attrs:{path:"trashfile.cleanup_reconfirm"}})],1)]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("cancel"),color:"orange"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("trashfile.empty"),color:"red"},on:{click:t.cleanUpTrash}})],1)],1)],1),s("q-dialog",{model:{value:t.detailControl,callback:function(e){t.detailControl=e},expression:"detailControl"}},[s("q-card",{staticStyle:{"min-width":"660px"}},[s("q-card-section",{staticClass:"row items-center "},[s("div",{staticClass:"text-h6"},[t._v("\n          "+t._s(t.$t("trashfile.file_info"))+"\n        ")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-card-section",{staticClass:"row justify-center q-mb-md"},[s("div",{staticClass:"col-sm-12 col-xs-12 q-gutter-md"},[void 0!==t.detail_info?s("fieldset",{staticClass:"q-pa-md shadow-2 rounded-borders"},[s("legend",{staticClass:"text-primary text-weight-bold"},[t._v("\n              "+t._s(t.$t("trashfile.detail_info"))+"\n            ")]),s("div",{staticClass:"row col-12"},[s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.inode"))+":")]),s("span",{staticClass:"col-10"},[t._v(t._s(t.getDetailField("inode")))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.mode"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.getDetailField("mode")))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.size"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.bytes2human(t.getDetailField("size"))))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.links"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.getDetailField("links")))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.blocks"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.getDetailField("blocks")))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.uid"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.getDetailField("uid")))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.gid"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.getDetailField("gid")))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.atime"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.getFormatTime(t.getDetailField("atime"))))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.mtime"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.getFormatTime(t.getDetailField("mtime"))))]),s("label",{staticClass:"col-2"},[t._v(t._s(t.$t("filesystem.ctime"))+":")]),s("span",{staticClass:"col-4"},[t._v(t._s(t.getFormatTime(t.getDetailField("ctime"))))])])]):t._e(),s("fieldset",{staticClass:"q-pa-md shadow-2 rounded-borders"},[s("legend",{staticClass:"text-primary text-weight-bold"},[t._v("\n              "+t._s(t.$t("trashfile.detail_info_block_title"))+"\n            ")]),s("pre",[t._v(t._s(t.detail_info.fileinfo_buf))])])])])],1)],1)],1)},i=[],n=s("2f62"),r=s("73ec"),l=s("2ef0"),o=s.n(l),c=function(){return c=Object.assign||function(t){for(var e,s=1,a=arguments.length;s<a;s++)for(var i in e=arguments[s],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c.apply(this,arguments)},u=function(t,e,s,a){function i(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,n){function r(t){try{o(a.next(t))}catch(e){n(e)}}function l(t){try{o(a["throw"](t))}catch(e){n(e)}}function o(t){t.done?s(t.value):i(t.value).then(r,l)}o((a=a.apply(t,e||[])).next())}))},d=function(t,e){var s,a,i,n,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function l(t){return function(e){return o([t,e])}}function o(n){if(s)throw new TypeError("Generator is already executing.");while(r)try{if(s=1,a&&(i=2&n[0]?a["return"]:n[0]?a["throw"]||((i=a["return"])&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,a=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){r=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){r.label=n[1];break}if(6===n[0]&&r.label<i[1]){r.label=i[1],i=n;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(n);break}i[2]&&r.ops.pop(),r.trys.pop();continue}n=e.call(t,r)}catch(l){n=[6,l],a=0}finally{s=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},h={name:"TrashPage",components:{},preFetch:function(t){var e=t.store;t.currentRoute;return u(this,void 0,void 0,(function(){var t;return d(this,(function(s){return t={offset:0,limit:100,sort_key:"",sort_oder:"desc"},e.dispatch("getVfsTrash",t),[2]}))}))},setup:function(){var t=["path","name","size","ctime","expire_time","operation"];return{visibleColumns:t}},computed:c(c(c({},Object(n["e"])({trashList:function(t){return t.trash.trash_list},allTrashList:function(t){return t.trash.all_trash_list},detail_info:function(t){return t.trash.detail_info}})),Object(n["c"])(["getTrashLoading"])),{getDetailField:function(){var t=this;return function(e){var s;return void 0!==(null===(s=t.detail_info)||void 0===s?void 0:s.stat_info)?t.detail_info.stat_info[e]:""}},bytes2human:function(){return function(t){return Object(r["a"])(t)}},getFormatTime:function(){return function(t){return Object(r["d"])(t)}},get_sub_name:function(){return function(t){var e=t,s=30;return t.length>s&&(e=t.substring(0,s)+"..."),e}},showMore:function(){return this.allTrashList.length!==+this.pagination.rowsNumber},filter_columns:function(){return this.columns.filter((function(t){return"operation"!=t.name&&"id"!=t.name}))},multipleData:function(){var t=[{icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.file_manager"),icon:"icon_file_manager",to:"/file_manager/trash_bin",call:this.refreshList},{label:this.$t("breadCrumbs.trash.page")}];return t},pagination:{get:function(){var t={sortBy:this.pagination_data.sortBy,descending:this.pagination_data.descending,page:this.pagination_data.page,rowsPerPage:this.pagination_data.rowsPerPage,rowsNumber:+this.$store.state.trash.total};return t},set:function(t){}}}),data:function(){return{setTrashTimeControl:!1,unlinkControl:!1,cleanUpControl:!1,detailControl:!1,filter:"",selectRow:{},pagination_data:{sortBy:"desc",descending:!1,page:1,rowsPerPage:0,rowsNumber:+this.$store.state.trash.total},form:{path:"",trashtime:""},columns:[{name:"name",label:this.$t("trashfile.filename"),align:"left",field:"name",classes:"automation-text-overflow",headerStyle:"width: 250px"},{name:"size",label:this.$t("trashfile.size"),align:"center",field:"size",format:function(t){return 0===t?0:Object(r["a"])(t)}},{name:"ctime",label:this.$t("trashfile.ctime"),align:"center",field:"ctime",format:function(t){return Object(r["d"])(t)}},{name:"expire_time",label:this.$t("trashfile.expire_time"),align:"center",field:"expire_time"},{name:"operation",label:this.$t("operation"),align:"center"}]}},destroyed:function(){this.$store.commit("SET_VFS_ALL_TRASH_LIST",[])},methods:c(c(c({},Object(n["d"])(["SET_VFS_ALL_TRASH_LIST"])),Object(n["b"])(["getVfsTrash","getTrashFileInfo","restoreTrashFile","unlinkTrashFile","cleanup","setTrashTime"])),{loadMore:function(){return u(this,void 0,void 0,(function(){var t,e;return d(this,(function(s){switch(s.label){case 0:return t={offset:this.allTrashList.length,limit:100,sort_key:"type",sort_oder:"desc"},[4,this.$store.dispatch("getVfsTrash",t)];case 1:return s.sent(),e=o.a.cloneDeep(this.allTrashList),this.$store.commit("SET_VFS_ALL_TRASH_LIST",e.concat(this.trashList)),[2]}}))}))},onRowClick:function(t,e,s){this.selectRow=e},onReset:function(){this.form={path:"",trashtime:""}},refreshList:function(){return u(this,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return t={offset:0,limit:100,sort_key:"type",sort_oder:"desc"},[4,this.$store.dispatch("getVfsTrash",t)];case 1:return e.sent(),this.$store.commit("SET_VFS_ALL_TRASH_LIST",this.trashList),[2]}}))}))},restoreFile:function(){return u(this,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return t={path:this.selectRow.path},[4,this.$store.dispatch("restoreTrashFile",t)];case 1:return e.sent(),[4,this.refreshList()];case 2:return e.sent(),[2]}}))}))},unlinkFile:function(){return u(this,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return t={path:this.selectRow.path},[4,this.$store.dispatch("unlinkTrashFile",t)];case 1:return e.sent(),[4,this.refreshList()];case 2:return e.sent(),[2]}}))}))},cleanUpTrash:function(){return u(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,this.$store.dispatch("cleanup")];case 1:return t.sent(),[4,this.refreshList()];case 2:return t.sent(),[2]}}))}))},setTrashTime:function(){return u(this,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return t={path:this.selectRow.path,trashtime:Math.floor(3600*this.form.trashtime)},[4,this.$store.dispatch("setTrashTime",t)];case 1:return e.sent(),this.setTrashTimeControl=!1,[4,this.refreshList()];case 2:return e.sent(),[2]}}))}))},getDetailInfo:function(){return u(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,this.$store.dispatch("getTrashFileInfo",{path:this.selectRow.path})];case 1:return t.sent(),this.detailControl=!this.detailControl,[2]}}))}))}})},f=h,p=s("2877"),m=s("9989"),_=s("eaac"),b=s("74f7"),v=s("2c91"),g=s("9c40"),C=s("0016"),y=s("db86"),w=s("05c0"),q=s("4e73"),T=s("1c1c"),k=s("66e5"),$=s("4074"),x=s("bd08"),L=s("24e8"),S=s("f09f"),F=s("a370"),Q=s("0378"),D=s("27f9"),R=s("4b7e"),j=s("7f67"),I=s("eebe"),O=s.n(I),z=Object(p["a"])(f,a,i,!1,null,null,null);e["default"]=z.exports;O()(z,"components",{QPage:m["a"],QTable:_["a"],QInnerLoading:b["a"],QSpace:v["a"],QBtn:g["a"],QIcon:C["a"],QTd:y["a"],QTooltip:w["a"],QMenu:q["a"],QList:T["a"],QItem:k["a"],QItemSection:$["a"],QTr:x["a"],QDialog:L["a"],QCard:S["a"],QCardSection:F["a"],QForm:Q["a"],QInput:D["a"],QCardActions:R["a"]}),O()(z,"directives",{ClosePopup:j["a"]})}}]);