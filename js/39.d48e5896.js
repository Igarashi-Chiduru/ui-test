(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{b62a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("MultipleBreadcrumbs",{attrs:{"multiple-data":t.multipleData}}),a("div",{staticClass:"row col-12 justify-center"},[a("q-card",{staticClass:"col-10",staticStyle:{padding:"20px",height:"100%"}},[a("h5",{staticClass:"q-my-none",staticStyle:{"min-width":"150px","padding-top":"16px","padding-left":"16px"},attrs:{outlined:"",dense:"","options-dense":""}},[t._v("\n        "+t._s(t.$t("quota.set_title"))+"\n      ")]),a("q-card-section",[a("q-form",{staticClass:"row  items-center ",on:{submit:t.onSubmit}},[a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.path"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.$t("quota.input_path_hint")}]},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}}),a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.soft_inodes"),type:"number","lazy-rules":"",rules:[function(e){return e>=0&&e<4294967296||t.$t("quota.input_inodes_hint")}]},model:{value:t.form.soft_inodes,callback:function(e){t.$set(t.form,"soft_inodes",t._n(e))},expression:"form.soft_inodes"}}),a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.hard_inodes"),type:"number","lazy-rules":"",rules:[function(e){return e>=0&&e<4294967296||t.$t("quota.input_inodes_hint")}]},model:{value:t.form.hard_inodes,callback:function(e){t.$set(t.form,"hard_inodes",t._n(e))},expression:"form.hard_inodes"}}),a("div",{staticClass:"col-12 row justify-between items-center"},[a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.soft_length"),"lazy-rules":"",type:"number",rules:[function(e){return e>=0&&e<=1023||t.$t("quota.input_value_hint")},function(e){return t.checkUnitSize||t.$t("quota.input_value_range")}]},model:{value:t.form.soft_length,callback:function(e){t.$set(t.form,"soft_length",t._n(e))},expression:"form.soft_length"}},[a("q-select",{staticClass:"col-2",attrs:{options:t.unitOptions,label:t.$t("quota.unit"),color:"primary","options-selected-class":"text-primary"},model:{value:t.form.soft_length_unit,callback:function(e){t.$set(t.form,"soft_length_unit",e)},expression:"form.soft_length_unit"}})],1)],1),a("div",{staticClass:"col-12 row justify-between items-center"},[a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.hard_length"),"lazy-rules":"",type:"number",rules:[function(e){return e>=0&&e<=1023||t.$t("quota.input_value_hint")},function(e){return t.checkUnitSize||t.$t("quota.input_value_range")}]},model:{value:t.form.hard_length,callback:function(e){t.$set(t.form,"hard_length",t._n(e))},expression:"form.hard_length"}},[a("q-select",{staticClass:"col-2",attrs:{options:t.unitOptions,label:t.$t("quota.unit"),color:"primary","options-selected-class":"text-primary"},model:{value:t.form.hard_length_unit,callback:function(e){t.$set(t.form,"hard_length_unit",e)},expression:"form.hard_length_unit"}})],1)],1),a("div",{staticClass:"col-12 row justify-between items-center"},[a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.soft_size"),"lazy-rules":"",type:"number",rules:[function(e){return e>=0&&e<=1023||t.$t("quota.input_value_hint")},function(e){return t.checkUnitSize||t.$t("quota.input_value_range")}]},model:{value:t.form.soft_size,callback:function(e){t.$set(t.form,"soft_size",t._n(e))},expression:"form.soft_size"}},[a("q-select",{staticClass:"col-2",attrs:{options:t.unitOptions,label:t.$t("quota.unit"),color:"primary","options-selected-class":"text-primary"},model:{value:t.form.soft_size_unit,callback:function(e){t.$set(t.form,"soft_size_unit",e)},expression:"form.soft_size_unit"}})],1)],1),a("div",{staticClass:"col-12 row justify-between items-center"},[a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.hard_size"),type:"number","lazy-rules":"",rules:[function(e){return e>=0&&e<=1023||t.$t("quota.input_value_hint")},function(e){return t.checkUnitSize||t.$t("quota.input_value_range")}]},model:{value:t.form.hard_size,callback:function(e){t.$set(t.form,"hard_size",t._n(e))},expression:"form.hard_size"}},[a("q-select",{staticClass:"col-2",attrs:{options:t.unitOptions,label:t.$t("quota.unit"),color:"primary","options-selected-class":"text-primary"},model:{value:t.form.hard_size_unit,callback:function(e){t.$set(t.form,"hard_size_unit",e)},expression:"form.hard_size_unit"}})],1)],1),a("div",{staticClass:"col-12 row justify-between items-center"},[a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.soft_realsize"),type:"number","lazy-rules":"",rules:[function(e){return e>=0&&e<=1023||t.$t("quota.input_value_hint")},function(e){return t.checkUnitSize||t.$t("quota.input_value_range")}]},model:{value:t.form.soft_realsize,callback:function(e){t.$set(t.form,"soft_realsize",t._n(e))},expression:"form.soft_realsize"}},[a("q-select",{staticClass:"col-2",attrs:{options:t.unitOptions,label:t.$t("quota.unit"),color:"primary","options-selected-class":"text-primary"},model:{value:t.form.soft_realsize_unit,callback:function(e){t.$set(t.form,"soft_realsize_unit",e)},expression:"form.soft_realsize_unit"}})],1)],1),a("div",{staticClass:"col-12 row justify-between items-center"},[a("q-input",{staticClass:"col-12",attrs:{label:t.$t("quota.hard_realsize"),rules:[function(e){return e>=0&&e<=1023||t.$t("quota.input_value_hint")},function(e){return t.checkUnitSize||t.$t("quota.input_value_range")}]},model:{value:t.form.hard_realsize,callback:function(e){t.$set(t.form,"hard_realsize",t._n(e))},expression:"form.hard_realsize"}},[a("q-select",{staticClass:"col-2",attrs:{options:t.unitOptions,label:t.$t("quota.unit"),color:"primary","options-selected-class":"text-primary"},model:{value:t.form.hard_realsize_unit,callback:function(e){t.$set(t.form,"hard_realsize_unit",e)},expression:"form.hard_realsize_unit"}})],1)],1),a("div",{staticClass:"col-12 row"},[a("q-btn",{attrs:{label:t.$tc("submit",1),type:"submit",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm",attrs:{flat:"",label:t.$t("cancel"),color:"primary",to:"/file_manager/smart_quota"}})],1)],1)],1)],1)],1)],1)},i=[],o=a("ded3"),n=a.n(o),r=a("c973"),l=a.n(r),u=(a("ac1f"),a("1276"),a("99af"),a("96cf"),a("2f62")),c=a("2ef0"),_=a.n(c),f=a("73ec"),h={name:"QuotaSetPage",components:{},preFetch:function(t){return l()(regeneratorRuntime.mark((function e(){var a,s,i,o,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.store,n=t.currentRoute,r=t.redirect,null===(a=n.params)||void 0===a||!a.query_path){e.next=6;break}return e.next=4,o.dispatch("getDetailQuota",{path:n.params.query_path});case 4:e.next=7;break;case 6:"add"!==(null===(s=n.params)||void 0===s?void 0:s.action)&&void 0===(null===(i=o.state.quotas.select_quota_row)||void 0===i?void 0:i.path)&&r({path:"/file_manager/smart_quota"});case 7:case"end":return e.stop()}}),e)})))()},data:function(){var t,e=this.$store.state.quotas.select_quota_row,a={path:"",soft_inodes:"",hard_inodes:"",soft_length:"",soft_length_unit:{label:"GiB",value:"GiB"},hard_length:"",hard_length_unit:{label:"GiB",value:"GiB"},soft_size:"",soft_size_unit:{label:"GiB",value:"GiB"},hard_size:"",hard_size_unit:{label:"GiB",value:"GiB"},soft_realsize:"",soft_realsize_unit:{label:"GiB",value:"GiB"},hard_realsize:"",hard_realsize_unit:{label:"GiB",value:"GiB"}};if("update"===(null===(t=this.$route.params)||void 0===t?void 0:t.action)){var s,i={};null!==(s=this.$route.params)&&void 0!==s&&s.query_path?(i=_.a.cloneDeep(this.$store.state.quotas.detail_info),i["path"]=this.$route.params.query_path):i=e;var o=this.check_null_quota(i.length.soft_quota),n=this.getUnitOption(_.a.split(Object(f["a"])(i.length.soft_quota)," ")[1],o),r=this.check_null_quota(i.length.hard_quota),l=this.getUnitOption(_.a.split(Object(f["a"])(i.length.hard_quota)," ")[1],r),u=this.check_null_quota(i.size.soft_quota),c=this.getUnitOption(_.a.split(Object(f["a"])(i.size.soft_quota)," ")[1],u),h=this.check_null_quota(i.size.hard_quota),m=this.getUnitOption(_.a.split(Object(f["a"])(i.size.hard_quota)," ")[1],h),d=this.check_null_quota(i.realsize.soft_quota),p=this.getUnitOption(_.a.split(Object(f["a"])(i.realsize.soft_quota)," ")[1],d),b=this.check_null_quota(i.realsize.hard_quota),q=this.getUnitOption(_.a.split(Object(f["a"])(i.realsize.hard_quota)," ")[1],b);a={path:i.path,soft_inodes:i.inodes.soft_quota,hard_inodes:i.inodes.hard_quota,soft_length:o,soft_length_unit:n,hard_length:r,hard_length_unit:l,soft_size:u,soft_size_unit:c,hard_size:h,hard_size_unit:m,soft_realsize:d,soft_realsize_unit:p,hard_realsize:b,hard_realsize_unit:q}}return{isPwd:!0,form:a,unitOptions:[{label:"B",value:"B"},{label:"KiB",value:"KiB"},{label:"MiB",value:"MiB"},{label:"GiB",value:"GiB"},{label:"TiB",value:"TiB"},{label:"PiB",value:"PiB"},{label:"EiB",value:"EiB"},{label:"ZiB",value:"ZiB",disable:!0}]}},computed:n()(n()(n()({},Object(u["e"])({detail_info:function(t){return t.quotas.detail_info}})),Object(u["c"])({})),{},{bytes2human:function(){return function(t){return Object(f["a"])(t)}},checkUnitSize:function(){return"EiB"===this.form.soft_length_unit.value?this.form.soft_length<16:"EiB"===this.form.hard_length_unit.value?this.form.hard_length<16:"EiB"===this.form.soft_size_unit.value?this.form.hard_size<16:"EiB"===this.form.soft_realsize_unit.value?this.form.soft_realsize<16:"EiB"===this.form.soft_length_unit.value?this.form.soft_length<16:"EiB"!==this.form.hard_realsize_unit.value||this.form.hard_realsize<16},multipleData:function(){var t=[{icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.file_manager"),icon:"icon_file_manager",to:"/file_manager/smart_quota"},{label:this.$t("breadCrumbs.quota.page"),to:"/file_manager/smart_quota"},{label:this.$t("breadCrumbs.quota.set")}];return t}}),methods:n()(n()({},Object(u["b"])(["setQuota"])),{},{getUnitOption:function(t,e){var a={label:e?t:"GiB",value:e?t:"GiB"};return a},check_null_quota:function(t){return null==t?"":+Object(f["a"])(t).split(" ")[0]},onSubmit:function(){var t=this;return l()(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.form,a={path:t.form.path,soft_inodes:t.form.soft_inodes,hard_inodes:t.form.hard_inodes,soft_length:t.form.soft_length?"".concat(t.form.soft_length).concat(t.form.soft_length_unit.value):"",hard_length:t.form.hard_length?"".concat(t.form.hard_length).concat(t.form.hard_length_unit.value):"",soft_size:t.form.soft_size?"".concat(t.form.soft_size).concat(t.form.soft_size_unit.value):"",hard_size:t.form.hard_size?"".concat(t.form.hard_size).concat(t.form.hard_size_unit.value):"",soft_realsize:t.form.soft_realsize?"".concat(t.form.soft_realsize).concat(t.form.soft_realsize_unit.value):"",hard_realsize:t.form.hard_realsize?"".concat(t.form.hard_realsize).concat(t.form.hard_realsize_unit.value):""},e.next=4,t.$store.dispatch("setQuota",a);case 4:s=e.sent,s&&t.$router.push({path:"/file_manager/smart_quota"});case 6:case"end":return e.stop()}}),e)})))()}})},m=h,d=a("2877"),p=a("9989"),b=a("f09f"),q=a("a370"),z=a("0378"),v=a("27f9"),g=a("ddd8"),$=a("9c40"),y=a("7f67"),B=a("eebe"),k=a.n(B),C=Object(d["a"])(m,s,i,!1,null,null,null);e["default"]=C.exports;k()(C,"components",{QPage:p["a"],QCard:b["a"],QCardSection:q["a"],QForm:z["a"],QInput:v["a"],QSelect:g["a"],QBtn:$["a"]}),k()(C,"directives",{ClosePopup:y["a"]})}}]);