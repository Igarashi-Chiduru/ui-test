(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{"0906":function(e,s,n){"use strict";n.r(s);var i=function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("q-page",{staticClass:"q-pa-lg"},[n("MultipleBreadcrumbs",{attrs:{"multiple-data":e.multipleData}}),n("div",{staticClass:"q-pa-md",staticStyle:{margin:"0px 200px"}},[n("q-card",{staticClass:"my-card",staticStyle:{padding:"20px",height:"100%"}},[n("h5",{staticClass:"q-mt-none",staticStyle:{"min-width":"150px","padding-top":"16px","padding-left":"16px"},attrs:{outlined:"",dense:"","options-dense":""}},[e._v("\n        "+e._s(e.$t("role.create.title"))+"\n      ")]),n("q-card-section",[n("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[n("q-input",{attrs:{filled:"",label:e.$t("role.create.role"),"lazy-rules":"",rules:[function(s){return s&&s.length>0||e.$t("role.create.role_hint")}]},model:{value:e.form.role,callback:function(s){e.$set(e.form,"role",s)},expression:"form.role"}}),n("q-input",{attrs:{filled:"",label:e.$t("role.create.display_name"),"lazy-rules":"",rules:[function(s){return null!==s&&""!==s||e.$t("role.create.display_name_hint")}]},model:{value:e.form.display_name,callback:function(s){e.$set(e.form,"display_name",s)},expression:"form.display_name"}}),n("MenuPermissionsBox",{ref:"data",attrs:{menuPermissions:e.menuPermissions,selections:e.selections}}),n("div",[n("q-btn",{attrs:{label:e.$tc("submit",1),type:"submit",color:"primary"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm",attrs:{flat:"",label:e.$t("cancel"),color:"primary",to:"/user_manager/roles"}})],1)],1)],1)],1)],1)],1)},t=[],l=n("c973"),a=n.n(l),o=n("ded3"),r=n.n(o),u=(n("96cf"),n("d81d"),n("2f62")),c=n("b9a8"),m={name:"RoleCreate",components:{MenuPermissionsBox:c["a"]},preFetch:function(e){var s=e.store;s.dispatch("getMenuPermissions")},data:function(){var e=this.$store.state.roles.menu_permissions,s={};return e.map((function(e){s[e.label]=!1,e.children&&e.children.map((function(e){s[e.label]=!1}))})),{selections:s,form:{role:"",display_name:""}}},computed:r()({checkRePassword:function(){return this.form.repassword===this.form.password},multipleData:function(){var e=[{label:this.$t("breadCrumbs.dashboard"),icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.user_manager"),icon:"icon_user_manager"},{label:this.$t("breadCrumbs.role.page"),icon:"person",to:"/user_manager/roles"},{label:this.$t("breadCrumbs.role.create"),icon:"person"}];return e}},Object(u["e"])({menuPermissions:function(e){return e.roles.menu_permissions}})),methods:r()(r()(r()({},Object(u["d"])(["SET_MENU_PERMISSIONS"])),Object(u["b"])(["getRoles","addUserInfo","getMenuPermissions"])),{},{onSubmit:function(){var e=this;return a()(regeneratorRuntime.mark((function s(){var n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.$refs["data"],i={role:e.form.role,display_name:e.form.display_name,menus:n.menus,permissions:n.permissions},s.next=4,e.$store.dispatch("createRoleInfo",i);case 4:e.$router.push({path:"/user_manager/roles"});case 5:case"end":return s.stop()}}),s)})))()}})},d=m,p=n("2877"),f=n("9989"),b=n("f09f"),h=n("a370"),x=n("0378"),v=n("27f9"),_=n("8562"),g=n("429b"),O=n("7460"),y=n("adad"),w=n("823b"),$=n("8f8e"),C=n("9c40"),q=n("7f67"),k=n("eebe"),P=n.n(k),Q=Object(p["a"])(d,i,t,!1,null,null,null);s["default"]=Q.exports;P()(Q,"components",{QPage:f["a"],QCard:b["a"],QCardSection:h["a"],QForm:x["a"],QInput:v["a"],QSplitter:_["a"],QTabs:g["a"],QTab:O["a"],QTabPanels:y["a"],QTabPanel:w["a"],QCheckbox:$["a"],QBtn:C["a"]}),P()(Q,"directives",{ClosePopup:q["a"]})},b9a8:function(e,s,n){"use strict";var i=function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",e._l(e.menuPermissions,(function(s,i){return n("div",{key:i,staticClass:"q-pa-sm rounded-borders"},[s.children?n("div",[n("div",{staticClass:"text-h6 text-weight-bold"},[e._v(e._s(e.$t(s.label)))]),e._l(s.children,(function(i,t){return n("div",{key:t,staticClass:"bg-grey-1 q-pa-sm rounded-borders"},[n("div",{staticClass:"text-weight-bold"},[e._v(e._s(e.$t(i.label)))]),n("q-checkbox",{attrs:{label:"全选",color:"orange"},on:{input:function(n){return e.selectAllRow(s,i)}},model:{value:e.selections[i.label],callback:function(s){e.$set(e.selections,i.label,s)},expression:"selections[children_item.label]"}}),n("q-option-group",{attrs:{name:i.label,options:i.permissions,type:"checkbox",color:"primary",inline:""},on:{input:function(n){return e.selectOption(e.permissions,s,i)}},model:{value:e.permissions,callback:function(s){e.permissions=s},expression:"permissions"}})],1)}))],2):n("div",[n("div",{staticClass:"text-h6 text-weight-bold"},[e._v(e._s(e.$t(s.label)))]),n("div",{staticClass:"bg-grey-1"},[n("q-checkbox",{attrs:{label:"全选",color:"orange"},on:{input:function(n){return e.selectAllRow(s)}},model:{value:e.selections[s.label],callback:function(n){e.$set(e.selections,s.label,n)},expression:"selections[item.label]"}}),n("q-option-group",{attrs:{name:s.label,options:s.permissions,type:"checkbox",color:"primary",inline:""},on:{input:function(n){return e.selectOption(e.permissions,s)}},model:{value:e.permissions,callback:function(s){e.permissions=s},expression:"permissions"}})],1)])])})),0)},t=[],l=(n("d81d"),n("a434"),n("73ec")),a={name:"MenuPermissionsBox",props:["menuPermissions","selections","selectRow"],data:function(){var e=[],s=[];return this.selectRow&&(e=Object(l["c"])(this.selectRow.permissions),s=Object(l["c"])(this.selectRow.menus)),{permissions:e,menus:s}},computed:{},methods:{selectOption:function(e,s){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=s;null!==i&&(t=i);var l=0;if(t.permissions.map((function(e){n.permissions.indexOf(e.value)>=0&&(l+=1)})),0==l){if(this.menus.indexOf(t.uuid)>=0&&this.menus.splice(this.menus.indexOf(t.uuid),1),null!==i&&this.menus.indexOf(s.uuid)>=0){var a=0;s.children.map((function(e){n.menus.indexOf(e.uuid)>=0&&(a+=1)})),0==a&&this.menus.splice(this.menus.indexOf(s.uuid),1)}this.selections[t.label]=!1}else this.menus.indexOf(t.uuid)<0&&this.menus.push(t.uuid),null!==i&&this.menus.indexOf(s.uuid)<0&&this.menus.push(s.uuid),l==t.permissions.length?this.selections[t.label]=!0:this.selections[t.label]=null},selectAllRow:function(e){var s=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e;null!==n&&(i=n),this.selections[i.label]?(this.menus.indexOf(i.uuid)<0&&this.menus.push(i.uuid),null!==n&&this.menus.indexOf(e.uuid)<0&&this.menus.push(e.uuid),i.permissions.map((function(e){s.permissions.indexOf(e.value)<0&&s.permissions.push(e.value)}))):0==this.selections[i.label]&&i.permissions.map((function(t){if(s.permissions.indexOf(t.value)>=0&&s.permissions.splice(s.permissions.indexOf(t.value),1),s.menus.indexOf(i.uuid)>=0&&s.menus.splice(s.menus.indexOf(i.uuid),1),null!==n&&s.menus.indexOf(e.uuid)>=0){var l=0;e.children.map((function(e){s.menus.indexOf(e.uuid)>=0&&(l+=1)})),0==l&&s.menus.splice(s.menus.indexOf(e.uuid),1)}}))}}},o=a,r=n("2877"),u=n("8f8e"),c=n("9f0a"),m=n("eebe"),d=n.n(m),p=Object(r["a"])(o,i,t,!1,null,null,null);s["a"]=p.exports;d()(p,"components",{QCheckbox:u["a"],QOptionGroup:c["a"]})}}]);