(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0b47":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ufs-design"},[s("div",{staticClass:"q-px-md"},[s("q-card",{staticClass:"q-gutter-y-md q-mt-md q-pb-md shadow-1",staticStyle:{height:"100%"},attrs:{square:"",flat:""}},[s("q-tabs",{staticClass:"text-grey shadow-2",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"","inline-label":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab",{attrs:{name:"init",label:t.$t("init.tab_init")}}),s("q-tab",{attrs:{name:"join",label:t.$t("init.tab_join")}})],1),s("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab-panel",{attrs:{name:"init"}},[s("q-stepper",{ref:"stepper",attrs:{flat:"","header-nav":"",color:"primary",animated:"",vertical:t.$q.screen.lt.sm},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[s("q-step",{attrs:{name:1,title:t.$t("init.configure_data"),icon:"settings",done:t.step>1,"header-nav":t.step>1}},[s("q-form",{staticClass:"full-width",on:{submit:t.oneOnSubmit}},[t._l(t.input_count,(function(e,a){return s("div",{key:a,staticClass:"row q-gutter-y-sm"},[s("span",{staticClass:"col-sm-4 col-xs-12",class:{"justify-end":t.$q.screen.gt.xs}},[s("q-item-label",{staticClass:"q-pr-md q-pt-sm",class:{"text-right":t.$q.screen.gt.xs}},[t._v("\n                      "+t._s(t.$t("init.ip_input"))+"\n                    ")])],1),s("span",{staticClass:"col-lg-4 col-md-5 col-sm-6 col-xs-12"},[s("q-item-label",[s("q-input",{attrs:{outlined:"",placeholder:t.$t("init.ip_holder"),dense:"",square:"",clearable:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||t.$t("init.ip_hint")},function(e){return t.ipValid(e)||t.$t("init.ip_valid")}]},model:{value:t.ips[a].ip,callback:function(e){t.$set(t.ips[a],"ip",e)},expression:"ips[index].ip"}})],1)],1)])})),s("q-stepper-navigation",{staticClass:"q-pt-sm"},[s("div",{staticClass:"row items-center justify-center"},[s("span",[t.input_count<5?s("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",color:"secondary",label:t.$t("init.add_input")},on:{click:t.addInput}}):t._e(),t.input_count>1?s("q-btn",{staticClass:"no-border-radius",staticStyle:{"margin-left":"10px"},attrs:{unelevated:"",color:"orange",label:t.$t("init.reduce_input")},on:{click:t.reduceInput}}):t._e(),s("q-btn",{staticClass:"q-ml-sm no-border-radius",attrs:{unelevated:"",color:"primary",label:t.$t("next_step"),type:"submit"}})],1)])])],2)],1),s("q-step",{attrs:{name:2,title:t.$t("init.init_data"),icon:"add_comment",done:t.step>2,"header-nav":!1}},[s("q-form",{staticClass:"full-width",on:{submit:t.towOnSubmit}},["loading"===t.status?s("div",[s("q-stepper-navigation",{staticClass:"row items-center justify-center"},[s("q-spinner-hourglass",{attrs:{color:"light-green",size:"5.5em"}})],1),s("div",{staticClass:"\n                      text-body1\n                      q-mb-md\n                      text-grey-6\n                      q-mt-md\n                      row\n                      items-center\n                      justify-center\n                    "},[t._v("\n                    "+t._s(t.$t("init.loading_init_data"))+"\n                  ")])],1):"create"===t.status?s("div",{staticClass:"row justify-center"},[s("div",{staticClass:"col-6"},[s("h6",{staticClass:"\n                        row\n                        col-11\n                        justify-center\n                        text-weight-bold text-grey\n                        q-my-none q-mb-md\n                      "},[t._v("\n                      "+t._s(t.$t("init.create_user"))+"\n                    ")]),s("q-item",{staticClass:"\n                        row\n                        col-12\n                        justify-center\n                        items-center\n                        q-gutter-x-md\n                      "},[s("span",{staticClass:"text-weight-bold text-grey col-2 q-mb-lg",attrs:{align:"right"}},[t._v(t._s(t.$t("member.name"))+":")]),s("q-input",{staticClass:"col-7",attrs:{disable:!0,outlined:"",dense:"",square:"",color:"primary","lazy-rules":"",rules:[function(e){return e&&e.length>0||t.$t("member.create.username_hint")}]},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),s("q-item",{staticClass:"\n                        row\n                        col-12\n                        justify-center\n                        items-center\n                        q-gutter-x-md\n                      "},[s("span",{staticClass:"text-weight-bold text-grey col-2 q-mb-lg",attrs:{align:"right"}},[t._v(t._s(t.$t("member.create.password"))+":")]),s("q-input",{staticClass:"col-7",attrs:{outlined:"",dense:"",square:"",type:t.isPwd?"password":"text","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||t.$t("member.create.password_hint")},function(e){return e.length>=6&&e.length<=16||t.$t("member.create.password_length_hint")}]},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),s("q-item",{staticClass:"\n                        row\n                        col-12\n                        justify-center\n                        items-center\n                        q-gutter-x-md\n                      "},[s("span",{staticClass:"text-weight-bold text-grey col-2 q-mb-lg",attrs:{align:"right"}},[t._v(t._s(t.$t("member.create.repassword"))+":")]),s("q-input",{staticClass:"col-7",attrs:{outlined:"",dense:"",square:"",color:"primary","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||t.$t("member.create.repassword_hint")},function(e){return t.checkRePassword||t.$t("member.create.repassword_check_hint")}]},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.form.repassword,callback:function(e){t.$set(t.form,"repassword",e)},expression:"form.repassword"}})],1)],1)]):s("div",[s("q-stepper-navigation",{staticClass:"row items-center justify-center"},[s("q-icon",{attrs:{name:"error",color:"red",size:"70px"}})],1),s("div",{staticClass:"\n                      text-body1\n                      q-mb-md\n                      text-grey-6\n                      q-mt-md\n                      row\n                      items-center\n                      justify-center\n                    "},[t._v("\n                    "+t._s(t.$t("init.init_data_error"))+"\n                  ")])],1),s("q-stepper-navigation",[s("div",{staticClass:"row items-center justify-center"},[s("span",{},["failed"!==t.status?s("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",type:"submit",color:"primary",label:t.$t("create")}}):t._e(),s("q-btn",{staticClass:"q-ml-sm no-border-radius",attrs:{flat:"",unelevated:"",color:"secondary",label:t.$t("last_step")},on:{click:t.lastSetp}}),"failed"===t.status?s("q-btn",{staticClass:"q-ml-sm no-border-radius",attrs:{unelevated:"",color:"secondary",label:t.$t("init.retry")},on:{click:function(e){t.status="create"}}}):t._e()],1)])])],1)],1),s("q-step",{attrs:{name:3,title:t.$t("complete"),icon:"published_with_changes","header-nav":t.step>3}},[s("q-card-section",{staticClass:"row items-center justify-center q-gutter-md"},[s("div",{staticClass:"inline-block text-center col-sm-auto col-xs-12"},[s("q-item-label",{staticClass:"q-pb-sm"},[s("q-icon",{attrs:{name:"check_circle",color:"positive",size:"70px"}})],1),s("q-item-label",{staticClass:"text-h6 q-py-sm"},[t._v(t._s(t.$t("init.welcome")))]),s("q-item-label",{staticClass:"text-h4 q-py-sm",attrs:{caption:""}},[t._v(t._s(t.$t("init.welcome_message")))]),s("q-item-label",{staticClass:"q-pt-lg"},[s("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",color:"primary",to:"/login",label:t.$t("login.submit")}})],1)],1)])],1)],1)],1),s("q-tab-panel",{attrs:{name:"join"}},[s("q-stepper",{ref:"stepper",attrs:{flat:"","header-nav":"",color:"primary",animated:""},model:{value:t.join_step,callback:function(e){t.join_step=e},expression:"join_step"}},[s("q-step",{attrs:{name:1,title:t.$t("init.join_config"),icon:"settings",done:t.join_step>1,"header-nav":t.join_step>1}},[s("q-form",{staticClass:"full-width",on:{submit:t.oneOnJoinSubmit}},[s("div",[s("div",{staticClass:"row q-gutter-y-sm q-pb-sm"},[s("span",{staticClass:"col-sm-4 col-xs-12",class:{"justify-end":t.$q.screen.gt.xs}},[s("q-item-label",{staticClass:"q-pr-md q-pt-sm",class:{"text-right":t.$q.screen.gt.xs}},[t._v("\n                        "+t._s(t.$t("init.ip_input"))+"\n                      ")])],1),s("span",{staticClass:"col-lg-4 col-md-5 col-sm-6 col-xs-12"},[s("q-item-label",[s("q-input",{attrs:{outlined:"",placeholder:t.$t("init.join_ip_holder"),dense:"",square:"",clearable:"","lazy-rules":"",rules:[function(e){return e&&e.length>0||t.$t("init.join_ip_hint")},function(e){return t.ipValid(e)||t.$t("init.ip_valid")}]},model:{value:t.join_ip,callback:function(e){t.join_ip=e},expression:"join_ip"}})],1)],1)])]),s("q-stepper-navigation",{staticClass:"q-pt-sm"},[s("div",{staticClass:"row items-center justify-center"},[s("span",[s("q-btn",{staticClass:"q-ml-sm no-border-radius",attrs:{unelevated:"",color:"primary",label:t.$t("next_step"),type:"submit"}})],1)])])],1)],1),s("q-step",{attrs:{name:3,title:t.$t("complete"),icon:"published_with_changes","header-nav":t.join_step>3}},[s("q-card-section",{staticClass:"row items-center justify-center q-gutter-md"},[s("div",{staticClass:"inline-block text-center col-sm-auto col-xs-12"},[s("q-item-label",{staticClass:"q-pb-sm"},[s("q-icon",{attrs:{name:"check_circle",color:"positive",size:"70px"}})],1),s("q-item-label",{staticClass:"text-h6 q-py-sm"},[t._v(t._s(t.$t("init.welcome")))]),s("q-item-label",{staticClass:"text-h4 q-py-sm",attrs:{caption:""}},[t._v(t._s(t.$t("init.welcome_message")))]),s("q-item-label",{staticClass:"q-pt-lg"},[s("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",color:"primary",to:"/login",label:t.$t("login.submit")}})],1)],1)])],1)],1)],1)],1)],1)],1)])},n=[],i=s("ded3"),r=s.n(i),o=s("c973"),c=s.n(o),l=(s("d81d"),s("b0c0"),s("96cf"),s("b6be")),d=s("2f62"),u=s("cf57"),p=s("f508"),m=s("18d6"),b=s("2a19"),f=s("4d91"),q={name:"InitManage",preFetch:function(t){return c()(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.store,t.currentRoute,t.previousRoute,s=m["a"].getItem("init_status"),s?"etcd"===s&&b["a"].create({position:"top",type:"positive",message:"".concat(f["b"].t("init.init_success"))}):b["a"].create({position:"top",type:"warning",message:"".concat(f["b"].t("request.uninitialized_platform_message"))});case 3:case"end":return e.stop()}}),e)})))()},data:function(){var t=1,e=1,s=m["a"].getItem("init_status");switch(s){case"etcd":t=2;break;case"complete":this.$router.push("/login");break;default:break}return{ips:[{ip:""},{ip:""},{ip:""},{ip:""},{ip:""}],input_count:1,step:t,isPwd:!1,status:"create",join_status:"create",tab:"init",join_step:e,join_ip:"",form:{name:"admin",password:"",repassword:""},timeout:null}},computed:{checkRePassword:function(){return this.form.repassword===this.form.password},ipValid:function(){return function(t){return Object(l["a"])(t)}}},methods:r()(r()(r()({},Object(d["d"])([])),Object(d["b"])(["initEtcd","initData","joinEtcd"])),{},{addInput:function(){this.input_count<=5&&(this.input_count+=1)},reduceInput:function(){this.ips[this.input_count-1].ip="",this.input_count-=1},oneOnSubmit:function(){var t=this;return c()(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=[],t.ips.map((function(t){t.ip.length>0&&s.push(t.ip)})),p["a"].show({spinner:u["a"],message:"".concat(f["b"].t("init.wait_hint"))}),e.next=5,t.$store.dispatch("preInitEtcd",s);case 5:if(a=e.sent,a){e.next=9;break}return p["a"].hide(),e.abrupt("return");case 9:return e.next=11,t.$store.dispatch("initEtcd",s);case 11:if(n=e.sent,p["a"].hide(),n){e.next=15;break}return e.abrupt("return");case 15:b["a"].create({position:"top",type:"positive",message:"".concat(f["b"].t("init.init_success"))}),t.step=2;case 17:case"end":return e.stop()}}),e)})))()},towOnSubmit:function(){var t=this;return c()(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.status="loading",s={name:t.form.name,role:"administrator",password:t.form.password},e.next=4,t.$store.dispatch("initData",s);case 4:"complete"===t.$q.localStorage.getItem("init_status")?(t.status="create",t.step=3):t.status="failed";case 5:case"end":return e.stop()}}),e)})))()},oneOnJoinSubmit:function(){var t=this;return c()(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p["a"].show({spinner:u["a"],message:"".concat(f["b"].t("init.wait_hint"))}),e.next=3,t.$store.dispatch("joinEtcd",{ip:t.join_ip});case 3:if(s=e.sent,s){e.next=7;break}return p["a"].hide(),e.abrupt("return");case 7:p["a"].hide(),b["a"].create({position:"top",type:"positive",message:"".concat(f["b"].t("init.join_success"))}),t.$q.localStorage.set("init_status","complete"),t.join_step=3;case 11:case"end":return e.stop()}}),e)})))()},jumpCreate:function(){this.$q.localStorage.set("init_status","complete"),this.join_step=3},lastSetp:function(){this.join_step=1,this.step=1,null!==this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}})},_=q,h=(s("1a7d"),s("2877")),g=s("f09f"),v=s("429b"),w=s("7460"),y=s("adad"),x=s("823b"),C=s("f531"),$=s("87fe"),j=s("0378"),k=s("0170"),F=s("27f9"),A=s("b19c"),S=s("9c40"),Q=s("9149"),I=s("66e5"),P=s("0016"),R=s("a370"),z=s("eebe"),O=s.n(z),E=Object(h["a"])(_,a,n,!1,null,null,null);e["default"]=E.exports;O()(E,"components",{QCard:g["a"],QTabs:v["a"],QTab:w["a"],QTabPanels:y["a"],QTabPanel:x["a"],QStepper:C["a"],QStep:$["a"],QForm:j["a"],QItemLabel:k["a"],QInput:F["a"],QStepperNavigation:A["a"],QBtn:S["a"],QSpinnerHourglass:Q["a"],QItem:I["a"],QIcon:P["a"],QCardSection:R["a"]})},"1a7d":function(t,e,s){"use strict";s("8201")},8201:function(t,e,s){},b6be:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return r}));var a=function(t){var e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;return e.test(t)},n=function(t){var e=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/gm;return e.test(t)},i=function(t){return n(t)||a(t)},r=function(t){var e=/^[_a-zA-Z0-9]+$/;return e.test(t)}}}]);