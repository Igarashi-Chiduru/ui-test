(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[47],{"1e08":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"q-pa-lg"},[s("MultipleBreadcrumbs",{attrs:{"multiple-data":t.multipleData}}),s("q-table",{attrs:{data:t.OpsLogs,columns:t.columns,"row-key":"id","visible-columns":t.visibleColumns,loading:t.changeLoading,filter:t.filter,"filter-method":t.onFilterData,pagination:t.pagination,"rows-per-page-label":t.$t("records_per_page")},on:{"row-click":t.onRowClick,"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("h5",{staticClass:"q-my-none col-12",staticStyle:{"min-width":"150px"},attrs:{outlined:"",dense:"","options-dense":""}},[t._v("\n        "+t._s(t.$t("log.ops_title"))+"\n      ")]),s("q-select",{staticStyle:{"min-width":"150px","max-width":"300px"},attrs:{dense:"",outlined:"",label:t.$t("log.select_node"),options:t.nodeOptions,color:"primary","options-selected-class":"text-primary"},on:{input:t.selectNode},scopedSlots:t._u([{key:"option",fn:function(e){return[s("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[s("q-item-section",[s("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.description))])],1)],1)]}}]),model:{value:t.node,callback:function(e){t.node=e},expression:"node"}}),s("q-select",{staticClass:"q-pa-md ",staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":t.$t("columns"),"emit-value":"","map-options":"",options:t.columns,"option-value":"name","options-cover":""},model:{value:t.visibleColumns,callback:function(e){t.visibleColumns=e},expression:"visibleColumns"}})]},proxy:!0},{key:"body-cell-id",fn:function(e){return[s("q-td",{attrs:{props:e}},[t._v("\n        "+t._s(e.pageIndex+1)+"\n      ")])]}},{key:"body-cell-path_params",fn:function(e){return[s("q-td",{attrs:{props:e}},[Object.keys(e.row.request.path_params).length>1?s("div",[s("q-chip",{attrs:{square:"",outline:"",size:"sm",color:"primary"}},[t._v(t._s(t.$t("log.params_detail"))+"\n            "),s("q-tooltip",{attrs:{"content-class":"bg-white shadow-8"}},t._l(e.row.request.path_params,(function(e,n,a){return s("div",{key:a},[s("q-chip",{attrs:{square:"",outline:"",size:"sm"}},[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(n)+"：")]),s("span",{staticClass:"text-primary q-ml-sm"},[t._v(t._s(e))])])],1)})),0)],1)],1):1===Object.keys(e.row.request.path_params).length?t._l(e.row.request.path_params,(function(e,n,a){return s("div",{key:a},[s("q-chip",{attrs:{square:"",outline:"",size:"sm"}},[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(n)+"：")]),s("span",{staticClass:"text-primary q-ml-sm"},[t._v(t._s(e))])])],1)})):s("div",[s("span",[t._v("-")])])],2)]}},{key:"body-cell-query_params",fn:function(e){return[s("q-td",{attrs:{props:e}},[Object.keys(e.row.request.query_params).length>1?s("div",[s("q-chip",{attrs:{square:"",outline:"",size:"sm",color:"primary"}},[t._v(t._s(t.$t("log.params_detail"))+"\n            "),s("q-tooltip",{attrs:{"content-class":"bg-white shadow-8"}},t._l(e.row.request.query_params,(function(e,n,a){return s("div",{key:a},[s("q-chip",{attrs:{square:"",outline:"",size:"sm"}},[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(n)+"：")]),s("span",{staticClass:"text-primary q-ml-sm"},[t._v(t._s(e))])])],1)})),0)],1)],1):1===Object.keys(e.row.request.query_params).length?t._l(e.row.request.query_params,(function(e,n,a){return s("div",{key:a},[s("q-chip",{attrs:{square:"",outline:"",size:"sm"}},[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(n)+"：")]),s("span",{staticClass:"text-primary q-ml-sm"},[t._v(t._s(e))])])],1)})):s("div",[s("span",[t._v("-")])])],2)]}},{key:"body-cell-form",fn:function(e){return[s("q-td",{attrs:{props:e}},[Object.keys(e.row.request.form).length>1?s("div",[s("q-chip",{attrs:{square:"",outline:"",size:"sm",color:"primary"}},[t._v(t._s(t.$t("log.params_detail"))+"\n            "),s("q-tooltip",{attrs:{"content-class":"bg-white shadow-8"}},t._l(e.row.request.form,(function(e,n,a){return s("div",{key:a},[s("q-chip",{attrs:{square:"",outline:"",size:"sm"}},[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(n)+"：")]),s("span",{staticClass:"text-primary q-ml-sm"},[t._v(t._s(e))])])],1)})),0)],1)],1):1===Object.keys(e.row.request.form).length?t._l(e.row.request.form,(function(e,n,a){return s("div",{key:a},[s("q-chip",{attrs:{square:"",outline:"",size:"sm"}},[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(n)+"：")]),s("span",{staticClass:"text-primary q-ml-sm"},[t._v(t._s(e))])])],1)})):s("div",[s("span",[t._v("-")])])],2)]}},{key:"body-cell-json",fn:function(e){return[s("q-td",{attrs:{props:e}},[Object.keys(e.row.request.json).length>1?s("div",[s("q-chip",{attrs:{square:"",outline:"",size:"sm",color:"primary"}},[t._v(t._s(t.$t("log.params_detail"))+"\n            "),s("q-tooltip",{attrs:{"content-class":"bg-white shadow-8"}},t._l(e.row.request.json,(function(e,n,a){return s("div",{key:a},[s("q-chip",{attrs:{square:"",outline:"",size:"sm"}},[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(n)+"：")]),s("span",{staticClass:"text-primary q-ml-sm"},[t._v(t._s(e))])])],1)})),0)],1)],1):1===Object.keys(e.row.request.json).length?t._l(e.row.request.json,(function(e,n,a){return s("div",{key:a},[s("q-chip",{attrs:{square:"",outline:"",size:"sm"}},[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(n)+"：")]),s("span",{staticClass:"text-primary q-ml-sm"},[t._v(t._s(e))])])],1)})):s("div",[s("span",[t._v("-")])])],2)]}}])},[s("TableNoData",{attrs:{slot:"no-data",filter:""},slot:"no-data"})],1)],1)},a=[],r=s("2f62"),o=s("2ef0"),i=s.n(o),l=function(){return l=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++)for(var a in e=arguments[s],e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},l.apply(this,arguments)},u=function(t,e,s,n){function a(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(e){r(e)}}function i(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?s(t.value):a(t.value).then(o,i)}l((n=n.apply(t,e||[])).next())}))},c=function(t,e){var s,n,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(t){return function(e){return l([t,e])}}function l(r){if(s)throw new TypeError("Generator is already executing.");while(o)try{if(s=1,n&&(a=2&r[0]?n["return"]:r[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(i){r=[6,i],n=0}finally{s=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},p={name:"SystemLogPage",components:{},preFetch:function(t){var e=t.store;return u(this,void 0,void 0,(function(){var t;return c(this,(function(s){switch(s.label){case 0:return[4,e.dispatch("getNodeList")];case 1:return s.sent(),t=i.a.split(e.state.nodes.node_ip_options[0].value,"|")[0],[4,e.dispatch("getOpsLogs",t)];case 2:return s.sent(),[2]}}))}))},setup:function(){var t=["id","request_id","ip","url","path_params","query_params","form","json","time"];return{visibleColumns:t}},computed:l(l(l({},Object(r["e"])({OpsLogs:function(t){return t.logs.ops_log_list},nodeOptions:function(t){return t.nodes.node_ip_options}})),Object(r["c"])(["getOpsLogList"])),{showCreate:function(){return!0},showDetail:function(){return!0},showUpdate:function(){return!0},showDelete:function(){return!0},filter_columns:function(){return this.columns.filter((function(t){return"operation"!==t.name}))},columns:function(){var t=[{name:"id",label:"#",field:"id",align:"left",style:"width: 2%"},{name:"request_id",label:this.$t("log.request_id"),field:"request_id",align:"center",sortable:!0},{name:"ip",label:this.$t("log.ip"),field:"ip",align:"center",sortable:!0},{name:"url",label:this.$t("log.url"),field:"request",align:"center",sortable:!0,format:function(t){return null===t||void 0===t?void 0:t.url}},{name:"path_params",label:this.$t("log.path_params"),field:"path_params",align:"center",sortable:!0},{name:"query_params",label:this.$t("log.query_params"),field:"query_params",align:"center",sortable:!0},{name:"form",label:this.$t("log.form"),field:"form",align:"center",sortable:!0},{name:"json",label:this.$t("log.json"),field:"json",align:"center",sortable:!0},{name:"time",label:this.$t("log.time"),field:"time",align:"center",sortable:!0}];return t},multipleData:function(){var t=[{label:this.$t("breadCrumbs.dashboard"),icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.log.label"),icon:"icon_log_manager",to:"/log_manager/devops_log",call:this.refreshList},{label:this.$t("breadCrumbs.log.operations_log")}];return t},changeLoading:function(){return console.log(),!(this.getOpsLogList.length>=0)}}),data:function(){return{loading:!0,delModalControl:!1,selected:[],selectRow:[],byVisibility:!0,filter:"",filterCols:[],node:this.$store.state.nodes.node_ip_options[0],pagination:{page:1,rowsPerPage:10}}},methods:l(l(l({},Object(r["d"])([])),Object(r["b"])(["getOpsLogs"])),{onFilterData:function(t,e){return this.$refs.child.onFilter(t,e)},onRowClick:function(t,e,s){this.selectRow=e},refreshList:function(){return u(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return t=i.a.split(this.node.value,"|")[0],[4,this.$store.dispatch("getOpsLogs",t)];case 1:return e.sent(),[2]}}))}))},selectNode:function(t){return u(this,void 0,void 0,(function(){var e;return c(this,(function(s){switch(s.label){case 0:return e=i.a.split(t.value,"|")[0],[4,this.$store.dispatch("getOpsLogs",e)];case 1:return s.sent(),this.node=t,[2]}}))}))}})},d=p,m=s("2877"),h=s("9989"),f=s("eaac"),_=s("ddd8"),b=s("66e5"),g=s("4074"),v=s("0170"),q=s("db86"),y=s("b047"),w=s("05c0"),k=s("eebe"),C=s.n(k),x=Object(m["a"])(d,n,a,!1,null,null,null);e["default"]=x.exports;C()(x,"components",{QPage:h["a"],QTable:f["a"],QSelect:_["a"],QItem:b["a"],QItemSection:g["a"],QItemLabel:v["a"],QTd:q["a"],QChip:y["a"],QTooltip:w["a"]})}}]);