(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"0e66":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"q-pa-lg"},[n("MultipleBreadcrumbs",{attrs:{"multiple-data":e.multipleData}}),n("q-table",{attrs:{data:e.licenseList,columns:e.columns,"row-key":"mss_uuid","visible-columns":e.visibleColumns,loading:e.changeLoading,filter:e.filter,"filter-method":e.onFilterData,"rows-per-page-label":e.$t("records_per_page")},on:{"row-click":e.onRowClick},scopedSlots:e._u([{key:"top",fn:function(){return[n("h5",{staticClass:"q-my-none col-12",staticStyle:{"min-width":"150px"},attrs:{outlined:"",dense:"","options-dense":""}},[e._v("\n        "+e._s(e.$t("licence.table_title"))+"\n      ")]),n("q-space"),n("q-select",{staticClass:"q-mt-sm",staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$t("columns"),"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":""},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}})]},proxy:!0},{key:"body-cell-id",fn:function(t){return[n("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.pageIndex+1)+"\n      ")])]}},{key:"body-cell-serial",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("span",{class:e.checkLicense(t.row.local_serial,t.row.serial)?"":"text-red"},[e._v(e._s(t.row.serial))])])]}},{key:"body-cell-operation",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("q-btn",{staticStyle:{"background-color":"#fff"},attrs:{flat:"",color:"black",icon:"more_vert",dense:""}},["damaged"!==t.row.state?n("q-menu",[n("q-list",{staticStyle:{"min-width":"100px"}},[n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){e.uploadModalControl=!e.uploadModalControl}}},[n("q-item-section",[e._v(e._s(e.$t("upload")))])],1)],1)],1):e._e()],1)],1)]}}])},[n("TableNoData",{attrs:{slot:"no-data",filter:""},slot:"no-data"})],1),n("q-dialog",{model:{value:e.uploadModalControl,callback:function(t){e.uploadModalControl=t},expression:"uploadModalControl"}},[n("q-card",[n("q-card-section",{staticClass:"row items-center"},[n("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("licence.upload_title")))]),n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),n("q-form",{on:{submit:e.uploadlicence,reset:e.onReset}},[n("q-card-section",{staticClass:"row justify-center",staticStyle:{"min-width":"400px"}},[n("div",{staticClass:"col-sm-12 col-xs-11 q-gutter-md"},[n("q-file",{staticClass:"q-pr-md",attrs:{name:"licence",label:e.$t("licence.select_file"),outlined:"",dense:"",square:"",clearable:"",accept:".BIN","max-total-size":4294967296},on:{rejected:e.onRejected},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),n("div",{staticClass:"text-right"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-sm no-border-radius",attrs:{outline:"",unelevated:"",label:e.$t("cancel"),type:"reset",color:"grey-6"}}),n("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",label:e.$t("upload"),type:"submit",color:"primary",disable:null===e.file}})],1)],1)])],1)],1)],1)],1)},s=[],l=n("2f62"),a=n("4d91"),r=function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},o=function(e,t,n,i){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function a(e){try{o(i.next(e))}catch(t){l(t)}}function r(e){try{o(i["throw"](e))}catch(t){l(t)}}function o(e){e.done?n(e.value):s(e.value).then(a,r)}o((i=i.apply(e,t||[])).next())}))},c=function(e,t){var n,i,s,l,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(e){return function(t){return o([e,t])}}function o(l){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,i&&(s=2&l[0]?i["return"]:l[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[2&l[0],s.value]),l[0]){case 0:case 1:s=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!(s=s.length>0&&s[s.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!s||l[1]>s[0]&&l[1]<s[3])){a.label=l[1];break}if(6===l[0]&&a.label<s[1]){a.label=s[1],s=l;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(l);break}s[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(r){l=[6,r],i=0}finally{n=s=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},u={name:"LicencePage",components:{},preFetch:function(e){var t=e.store;return o(this,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return[4,t.dispatch("getMetaServices",{})];case 1:return n.sent(),e=[],t.state.services.meta_list.map((function(t){e.push({mss_uuid:t.mss_uuid,sv_ip:t.sv_ip})})),[4,t.dispatch("getLicenses",e)];case 2:return n.sent(),[2]}}))}))},setup:function(){var e=["id","sv_ip","local_serial","serial","max_chunk_size","max_client_size","max_capacity","user","expire","issuer","operation"];return{visibleColumns:e}},computed:r(r(r({},Object(l["e"])({licenseList:function(e){return e.services.license_list}})),Object(l["c"])(["getLicenseList"])),{showCreate:function(){return!0},showDetail:function(){return!0},showUpdate:function(){return!0},showDelete:function(){return!0},filter_columns:function(){return this.columns.filter((function(e){return"operation"!==e.name&&"id"!==e.name}))},columns:function(){var e=[{name:"id",label:"#",field:"id",align:"left",style:"width: 2%"},{name:"mss_uuid",label:this.$t("licence.mss_uuid"),field:"mss_uuid",align:"left"},{name:"sv_ip",label:this.$t("licence.sv_ip"),field:"sv_ip",align:"left"},{name:"local_serial",label:this.$t("licence.local_serial"),field:"local_serial",align:"left"},{name:"serial",label:this.$t("licence.serial"),field:"serial",align:"left"},{name:"max_chunk_size",label:this.$t("licence.max_chunk_size"),field:"max_chunk_size",align:"center"},{name:"max_client_size",label:this.$t("licence.max_client_size"),field:"max_client_size",align:"center"},{name:"max_capacity",label:this.$t("licence.max_capacity"),field:"max_capacity",align:"center"},{name:"expire",label:this.$t("licence.expire"),field:"expire",align:"center"},{name:"user",label:this.$t("licence.user"),field:"user",align:"center"},{name:"issuer",label:this.$t("licence.issuer"),field:"issuer",align:"center"},{name:"operation",label:this.$t("operation"),field:"operation",align:"center"}];return e},multipleData:function(){var e=[{icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.cluster_manager"),icon:"icon_cluster_manager",to:"/cluster_manager/licence",call:this.refreshList},{label:this.$t("breadCrumbs.license.page")}];return e},changeLoading:function(){return!(this.getLicenseList.length>=0)},checkLicense:function(){return function(e,t){return e===t}}}),data:function(){return{file:null,loading:!0,uploadModalControl:!1,selected:[],selectRow:[],byVisibility:!0,filter:"",filterCols:[],status_info:[{state:"registered",color:"green",value:a["b"].t("registered"),class:"bg-green-1 no-border-radius"},{state:"unregistered",color:"grey",value:a["b"].t("unregistered"),class:"bg-grey-1 no-border-radius"}]}},methods:r(r(r({},Object(l["d"])([])),Object(l["b"])(["getLicenses","uploadLicense"])),{onFilterData:function(e,t){return this.$refs.child.onFilter(e,t)},onRowClick:function(e,t,n){this.selectRow=t},refreshList:function(){return o(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return e=[],this.$store.state.services.meta_list.map((function(t){e.push({mss_uuid:t.mss_uuid,sv_ip:t.sv_ip})})),[4,this.$store.dispatch("getLicenses",e)];case 1:return t.sent(),[2]}}))}))},uploadlicence:function(){return o(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return null===this.file?[3,3]:(e={mss_uuid:this.selectRow.mss_uuid,license_file:this.file},[4,this.$store.dispatch("uploadLicense",e)]);case 1:return t.sent(),this.uploadModalControl=!1,this.onReset(),[4,this.refreshList()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},onReset:function(){this.file=null},onRejected:function(){this.$q.notify({position:"top",type:"info",message:a["b"].t("licence.select_file_limit_hint")})}})},d=u,p=n("2877"),f=n("9989"),m=n("eaac"),h=n("2c91"),b=n("ddd8"),_=n("db86"),v=n("9c40"),g=n("4e73"),y=n("1c1c"),w=n("66e5"),x=n("4074"),C=n("24e8"),q=n("f09f"),k=n("a370"),$=n("0378"),L=n("7d53"),Q=n("7f67"),S=n("eebe"),j=n.n(S),M=Object(p["a"])(d,i,s,!1,null,null,null);t["default"]=M.exports;j()(M,"components",{QPage:f["a"],QTable:m["a"],QSpace:h["a"],QSelect:b["a"],QTd:_["a"],QBtn:v["a"],QMenu:g["a"],QList:y["a"],QItem:w["a"],QItemSection:x["a"],QDialog:C["a"],QCard:q["a"],QCardSection:k["a"],QForm:$["a"],QFile:L["a"]}),j()(M,"directives",{ClosePopup:Q["a"]})}}]);