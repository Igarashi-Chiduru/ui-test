(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{"851e":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"q-pa-lg"},[n("MultipleBreadcrumbs",{attrs:{"multiple-data":t.multipleData}}),n("q-table",{attrs:{dense:"",data:t.systemLogs,columns:t.columns,"row-key":"id","visible-columns":t.visibleColumns,loading:t.changeLoading,filter:t.filter,"filter-method":t.onFilterData,pagination:t.pagination,"rows-per-page-label":t.$t("records_per_page")},on:{"update:pagination":function(e){t.pagination=e},"row-click":t.onRowClick},scopedSlots:t._u([{key:"top",fn:function(){return[n("h5",{staticClass:"q-my-none col-12",staticStyle:{"min-width":"150px"},attrs:{outlined:"",dense:"","options-dense":""}},[t._v("\n        "+t._s(t.$t("log.table_title"))+"\n      ")]),n("q-select",{staticStyle:{"min-width":"150px","max-width":"300px"},attrs:{dense:"",outlined:"",label:t.$t("log.select_node"),options:t.nodeOptions,color:"primary","options-selected-class":"text-primary"},on:{input:t.selectNode},scopedSlots:t._u([{key:"option",fn:function(e){return[n("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[n("q-item-section",[n("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),n("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.description))])],1)],1)]}}]),model:{value:t.node,callback:function(e){t.node=e},expression:"node"}}),n("q-select",{staticClass:"q-pa-md ",staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":t.$t("columns"),"emit-value":"","map-options":"",options:t.columns,"option-value":"name","options-cover":""},model:{value:t.visibleColumns,callback:function(e){t.visibleColumns=e},expression:"visibleColumns"}})]},proxy:!0},{key:"body-cell-id",fn:function(e){return[n("q-td",{attrs:{props:e}},[t._v("\n        "+t._s(e.pageIndex+1)+"\n      ")])]}}])},[n("TableNoData",{attrs:{slot:"no-data",filter:""},slot:"no-data"})],1)],1)},i=[],s=n("2f62"),a=n("4d91"),r=n("2ef0"),l=n.n(r),c=function(){return c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c.apply(this,arguments)},u=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function a(t){try{l(o.next(t))}catch(e){s(e)}}function r(t){try{l(o["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):i(t.value).then(a,r)}l((o=o.apply(t,e||[])).next())}))},d=function(t,e){var n,o,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(t){return function(e){return l([t,e])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,o&&(i=2&s[0]?o["return"]:s[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},p={name:"SystemLogPage",components:{},preFetch:function(t){var e=t.store;return u(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return[4,e.dispatch("getNodeList")];case 1:return n.sent(),t=l.a.split(e.state.nodes.node_ip_options[0].value,"|")[0],[4,e.dispatch("getSystemLogs",t)];case 2:return n.sent(),[2]}}))}))},setup:function(){var t=["id","time","process","data"];return{visibleColumns:t}},computed:c(c(c({},Object(s["e"])({systemLogs:function(t){return t.logs.system_log_list},nodeOptions:function(t){return t.nodes.node_ip_options}})),Object(s["c"])(["getSystemLogList"])),{showCreate:function(){return!0},showDetail:function(){return!0},showUpdate:function(){return!0},showDelete:function(){return!0},filter_columns:function(){return this.columns.filter((function(t){return"operation"!==t.name}))},columns:function(){var t=[{name:"id",label:"#",field:"id",align:"left",style:"width: 2%"},{name:"time",label:this.$t("log.time"),field:"time",align:"center",sortable:!0},{name:"process",label:this.$t("log.process"),field:"process",align:"center"},{name:"data",label:this.$t("log.data"),field:"data",align:"center",format:function(t){var e=180;return t.length>e&&(t=t.substring(0,e)+"..."),t}}];return t},multipleData:function(){var t=[{icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.log.label"),icon:"icon_log_manager",to:"/log_manager/system_log",call:this.refreshList},{label:this.$t("breadCrumbs.log.system_log")}];return t},changeLoading:function(){return!(this.getSystemLogList.length>=0)}}),data:function(){return{loading:!0,delModalControl:!1,selected:[],selectRow:[],byVisibility:!0,filter:"",filterCols:[],node:this.$store.state.nodes.node_ip_options[0],pagination:{page:1,rowsPerPage:25},type_info:[{state:"notice",color:"info",value:a["b"].t("notice"),class:"bg-blue-1 no-border-radius"},{state:"warning",color:"warning",value:a["b"].t("warning"),class:"bg-amber-1 no-border-radius"},{state:"serious",color:"negative",value:a["b"].t("serious"),class:"bg-red-1 no-border-radius"}]}},methods:c(c(c({},Object(s["d"])([])),Object(s["b"])(["getSystemLogs"])),{onFilterData:function(t,e){return this.$refs.child.onFilter(t,e)},onRowClick:function(t,e,n){this.selectRow=e},refreshList:function(){return u(this,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return t=l.a.split(this.node.value,"|")[0],[4,this.$store.dispatch("getSystemLogs",t)];case 1:return e.sent(),[2]}}))}))},selectNode:function(t){return u(this,void 0,void 0,(function(){var e;return d(this,(function(n){switch(n.label){case 0:return e=l.a.split(t.value,"|")[0],[4,this.$store.dispatch("getSystemLogs",e)];case 1:return n.sent(),this.node=t,[2]}}))}))}})},f=p,m=n("2877"),b=n("9989"),g=n("eaac"),h=n("ddd8"),v=n("66e5"),y=n("4074"),w=n("0170"),_=n("db86"),L=n("eebe"),x=n.n(L),S=Object(m["a"])(f,o,i,!1,null,null,null);e["default"]=S.exports;x()(S,"components",{QPage:b["a"],QTable:g["a"],QSelect:h["a"],QItem:v["a"],QItemSection:y["a"],QItemLabel:w["a"],QTd:_["a"]})}}]);