(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{"28e8":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"q-pa-lg"},[o("MultipleBreadcrumbs",{attrs:{"multiple-data":t.multipleData}}),o("div",{staticClass:"row col-12 justify-center"},[o("q-card",{staticClass:"col-10",staticStyle:{padding:"20px",height:"100%"}},[o("h5",{staticClass:"q-my-none",staticStyle:{"min-width":"150px","padding-top":"16px","padding-left":"16px"},attrs:{outlined:"",dense:"","options-dense":""}},[t._v("\n        "+t._s(t.$t("export.update.title"))+"\n      ")]),o("q-card-section",{staticClass:"row"},[o("q-form",{staticClass:"q-gutter-lg col-12",on:{submit:t.onSubmit}},[o("q-input",{staticClass:"q-pb-none",attrs:{filled:"",label:t.$t("export.ip_range"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.$t("export.create.ip_range_hint")}]},model:{value:t.form.ip_range,callback:function(e){t.$set(t.form,"ip_range",e)},expression:"form.ip_range"}}),o("q-input",{staticClass:"q-pb-none",attrs:{filled:"",label:t.$t("export.path"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.$t("export.create.path_hint")}]},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}}),o("q-toggle",{attrs:{color:"green","checked-icon":"check",label:t.$t("export.alldirs")},model:{value:t.form.alldirs,callback:function(e){t.$set(t.form,"alldirs",e)},expression:"form.alldirs"}}),o("q-input",{staticClass:"q-pb-none",attrs:{filled:"",type:t.isPwd?"password":"text",label:t.$t("export.password"),"lazy-rules":""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),o("q-toggle",{staticStyle:{width:"100%"},attrs:{color:"green","checked-icon":"check",label:t.$t("export.read_mode")},model:{value:t.form.rw,callback:function(e){t.$set(t.form,"rw",e)},expression:"form.rw"}}),o("q-toggle",{staticStyle:{width:"100%"},attrs:{color:"green","checked-icon":"check",label:t.$t("export.ignore_gid")},model:{value:t.form.ignore_gid,callback:function(e){t.$set(t.form,"ignore_gid",e)},expression:"form.ignore_gid"}}),o("div",{staticClass:"row q-gutter-x-md items-center"},[o("q-item-label",{staticClass:"col-1"},[o("label",[t._v(" "+t._s(t.$t("export.map_root"))+" : ")])]),o("q-select",{staticClass:"col-4 q-pa-none",attrs:{outlined:"",options:t.userOption,label:t.$t("filesystem.select_owner"),dense:"",square:"",color:"primary","options-selected-class":"text-primary",rules:[function(e){return e||t.$t("export.select_user_hint")}]},scopedSlots:t._u([{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",[o("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),o("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.description))])],1)],1)]}}]),model:{value:t.form.root_user,callback:function(e){t.$set(t.form,"root_user",e)},expression:"form.root_user"}}),o("div",{staticClass:"col-1 justify-end"},[o("q-item-label",{staticClass:"text-weight-bold text-grey justify-end text-center"},[t._v(":")])],1),o("q-select",{staticClass:"col-4 q-pa-none",attrs:{behavior:"menu",outlined:"",options:t.groupOption,label:t.$t("filesystem.select_group"),dense:"",square:"",color:"primary","options-selected-class":"text-primary",rules:[function(e){return e||t.$t("export.select_group_hint")}]},scopedSlots:t._u([{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",[o("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),o("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.description))])],1)],1)]}}]),model:{value:t.form.root_group,callback:function(e){t.$set(t.form,"root_group",e)},expression:"form.root_group"}})],1),o("div",{staticClass:"row q-gutter-x-md items-center"},[o("q-item-label",{staticClass:"col-1"},[o("label",[t._v(" "+t._s(t.$t("export.map_all"))+" : ")])]),o("q-select",{staticClass:"col-4 q-pa-none",attrs:{outlined:"",options:t.userOption,label:t.$t("filesystem.select_owner"),dense:"",square:"",color:"primary","options-selected-class":"text-primary","lazy-rules":"",rules:[function(e){return e||t.$t("export.select_user_hint")}]},scopedSlots:t._u([{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",[o("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),o("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.description))])],1)],1)]}}]),model:{value:t.form.all_user,callback:function(e){t.$set(t.form,"all_user",e)},expression:"form.all_user"}}),o("div",{staticClass:"col-1 justify-end"},[o("q-item-label",{staticClass:"text-weight-bold text-grey justify-end text-center"},[t._v(":")])],1),o("q-select",{staticClass:"col-4 q-pa-none",attrs:{behavior:"menu",outlined:"",options:t.groupOption,label:t.$t("filesystem.select_group"),dense:"",square:"",color:"primary","options-selected-class":"text-primary","lazy-rules":"",rules:[function(e){return e||t.$t("export.select_group_hint")}]},scopedSlots:t._u([{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",[o("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),o("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.opt.description))])],1)],1)]}}]),model:{value:t.form.all_group,callback:function(e){t.$set(t.form,"all_group",e)},expression:"form.all_group"}})],1),o("div",[o("q-btn",{attrs:{label:t.$tc("submit",1),type:"submit",color:"primary"}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm",attrs:{flat:"",label:t.$t("cancel"),color:"primary",to:"/data_protection/smart_access"}})],1)],1)],1)],1)],1)],1)},a=[],s=o("ded3"),l=o.n(s),i=o("c973"),n=o.n(i),c=(o("96cf"),o("e260"),o("d3b7"),o("e6cf"),o("3ca3"),o("ddb0"),o("ac1f"),o("1276"),o("d81d"),o("99af"),o("2f62")),p={name:"ExportUpdatePage",components:{},preFetch:function(t){return n()(regeneratorRuntime.mark((function e(){var o,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.store,a=t.redirect,void 0===(null===(o=r.state.exports.select_export_row)||void 0===o?void 0:o.ip_range)&&a({path:"/data_protection/smart_access"}),s=[],r.state.acl.acl_user_list.length||s.push(r.dispatch("getAclUsers")),r.state.acl.acl_group_list.length||s.push(r.dispatch("getAclGroups")),!s.length){e.next=8;break}return e.next=8,Promise.race(s);case 8:case"end":return e.stop()}}),e)})))()},data:function(){var t=this.$store.state.exports.select_export_row,e=null,o=_.split(t.map_root,":")[0];this.$store.state.acl.acl_user_options.map((function(t){o&&+t.value[1]===+o&&(e=t)})),null===e&&o&&(e={label:o,value:[o,o]});var r=null,a=_.split(t.map_root,":")[1];this.$store.state.acl.acl_group_options.map((function(t){a&&+t.value[1]===+a&&(r=t)})),null===r&&a&&(r={label:a,value:[a,a]});var s=null,l=_.split(t.map_all,":")[0];this.$store.state.acl.acl_user_options.map((function(t){l&&+t.value[1]===+l&&(s=t)})),null===s&&l&&(s={label:l,value:[l,l]});var i=null,n=_.split(t.map_all,":")[1];this.$store.state.acl.acl_group_options.map((function(t){n&&+t.value[1]===+n&&(i=t)})),null===i&&n&&(i={label:n,value:[n,n]});var c={old_ip_range:t.ip_range,old_path:t.path,ip_range:t.ip_range,path:t.path,alldirs:t.alldirs,password:t.password,rw:t.rw,ignore_gid:t.ignore_gid,root_user:e,root_group:r,all_user:s,all_group:i,map_root:t.map_root,map_all:t.map_all};return console.log("form=====",c),{isPwd:!0,form:c}},computed:l()(l()(l()({},Object(c["e"])({userOption:function(t){return t.acl.acl_user_options},groupOption:function(t){return t.acl.acl_group_options}})),Object(c["c"])({})),{},{multipleData:function(){var t=[{icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.data_protection"),icon:"icon_data_protection",to:"/data_protection/smart_access"},{label:this.$t("breadCrumbs.export.page"),to:"/data_protection/smart_access"},{label:this.$t("breadCrumbs.export.create")}];return t}}),methods:l()(l()({},Object(c["b"])(["updateExport"])),{},{onSubmit:function(){var t=this;return n()(regeneratorRuntime.mark((function e(){var o,r,a,s,l,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l="",i="",null!==(o=t.form.root_user)&&void 0!==o&&o.value&&null!==(r=t.form.root_group)&&void 0!==r&&r.value&&(l="".concat(t.form.root_user.value[1],":").concat(t.form.root_group.value[1])),null!==(a=t.form.all_user)&&void 0!==a&&a.value&&null!==(s=t.form.all_group)&&void 0!==s&&s.value&&(i="".concat(t.form.all_user.value[1],":").concat(t.form.all_group.value[1])),n={old_ip_range:t.form.old_ip_range,old_path:t.form.old_path,ip_range:t.form.ip_range,path:t.form.path,alldirs:t.form.alldirs,password:t.form.password,rw:t.form.rw,ignore_gid:t.form.ignore_gid,map_root:l,map_all:i},e.next=7,t.$store.dispatch("updateExport",n);case 7:t.$router.push({path:"/data_protection/smart_access"});case 8:case"end":return e.stop()}}),e)})))()}})},u=p,m=o("2877"),d=o("9989"),f=o("f09f"),g=o("a370"),b=o("0378"),v=o("27f9"),h=o("9564"),q=o("0016"),x=o("0170"),w=o("ddd8"),$=o("66e5"),y=o("4074"),C=o("9c40"),k=o("7f67"),P=o("eebe"),S=o.n(P),Q=Object(m["a"])(u,r,a,!1,null,null,null);e["default"]=Q.exports;S()(Q,"components",{QPage:d["a"],QCard:f["a"],QCardSection:g["a"],QForm:b["a"],QInput:v["a"],QToggle:h["a"],QIcon:q["a"],QItemLabel:x["a"],QSelect:w["a"],QItem:$["a"],QItemSection:y["a"],QBtn:C["a"]}),S()(Q,"directives",{ClosePopup:k["a"]})}}]);