(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"25c1":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"q-pa-lg"},[s("MultipleBreadcrumbs",{attrs:{"multiple-data":e.multipleData}}),s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"bg-grey-2"},[s("q-card",[s("q-table",{attrs:{data:e.metaList,columns:e.metaColumns,"row-key":"mss_uuid","visible-columns":e.visibleMetaColumns,loading:e.changeMetaLoading,filter:e.filter,pagination:e.pagination,"rows-per-page-label":e.$t("records_per_page")},on:{"row-click":e.onRowClick,request:e.onRequest,"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[s("h5",{staticClass:"q-my-none col-12",staticStyle:{"min-width":"150px"},attrs:{outlined:"",dense:"","options-dense":""}},[e._v("\n              "+e._s(e.$t("service.meta_table_title"))+"\n            ")]),s("q-select",{staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$t("columns"),"emit-value":"","map-options":"",options:e.metaColumns,"option-value":"name","options-cover":""},model:{value:e.visibleMetaColumns,callback:function(t){e.visibleMetaColumns=t},expression:"visibleMetaColumns"}}),s("q-space"),s("div",{staticClass:"q-pa-md "},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.showCreate,expression:"showCreate"}],attrs:{label:e.$t("add"),color:"primary"},on:{click:function(t){e.addMetaModalControl=!e.addMetaModalControl}}})],1)]},proxy:!0},{key:"body-cell-id",fn:function(t){return[s("q-td",{attrs:{props:t}},[e._v("\n              "+e._s(t.pageIndex+1)+"\n            ")])]}},{key:"body-cell-meta_version",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("span",{staticClass:"text-primary"},[e._v(e._s(e.get_meta_version(t.row.meta_version)))])])]}},{key:"body-cell-working_state",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("TableStateField",{attrs:{field:t.row.working_state,stateInfo:e.meta_state_info}})],1)]}},{key:"body-cell-sync",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("TableStateField",{attrs:{field:t.row.sync,stateInfo:e.sync_info}})],1)]}},{key:"body-cell-enable_autorun",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-toggle",{attrs:{color:"green"},on:{input:function(s){return e.setEnableAutorun(t.row,t.row.enable_autorun)}},model:{value:t.row.enable_autorun,callback:function(s){e.$set(t.row,"enable_autorun",s)},expression:"props.row.enable_autorun"}})],1)]}},{key:"body-cell-is_running",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("TableStateField",{attrs:{field:t.row.is_running,stateInfo:e.running_info}})],1)]}},{key:"body-cell-mem_ratio",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-linear-progress",{staticClass:"q-mt-sm",attrs:{rounded:"",size:"10px",color:"cyan",value:e.getUsedPercent(t.row.mem_total,t.row.mem_usage)}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col text-left"},[e._v("\n                  "+e._s(e.percentFormat(e.getUsedPercent(t.row.mem_total,t.row.mem_usage)))+"\n                ")]),s("div",{staticClass:"col text-right"},[e._v("\n                  "+e._s(e.bytes2human(t.row.mem_usage))+" /\n                  "+e._s(e.bytes2human(t.row.mem_total))+"\n                ")])])],1)]}},{key:"body-cell-operation",fn:function(t){return[s("q-td",{directives:[{name:"show",rawName:"v-show",value:e.showDetail||e.showDelete||e.showActionStart||e.showActionStop||e.showActionRestart||e.showActionReload||e.showActionSetLabel||e.showActionMaintenaceOn||e.showActionMaintenaceOff,expression:"\n                showDetail ||\n                  showDelete ||\n                  showActionStart ||\n                  showActionStop ||\n                  showActionRestart ||\n                  showActionReload ||\n                  showActionSetLabel ||\n                  showActionMaintenaceOn ||\n                  showActionMaintenaceOff\n              "}],attrs:{props:t}},[s("div",[s("q-btn",{staticStyle:{"background-color":"#fff"},attrs:{flat:"",color:"black",icon:"more_vert",dense:""}},[s("q-menu",[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showDetail,expression:"showDetail"}],attrs:{clickable:"",to:{name:"meta_detail",params:{mss_uuid:t.row.mss_uuid}}}},[s("q-item-section",[e._v(e._s(e.$t("detail")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showDelete,expression:"showDelete"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:e.isMetaDead(t.row.working_state)},on:{click:function(t){return e.setModalControl("delete")}}},[s("q-item-section",{class:{"text-grey-6":!e.isMetaDead(t.row.working_state)}},[e._v(e._s(e.$t("delete")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionStart,expression:"showActionStart"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:e.isMetaDead(t.row.working_state)||e.isMetaBusy(t.row.working_state)},on:{click:function(t){return e.setModalControl("start")}}},[s("q-item-section",{class:{"text-grey-6":!(e.isMetaDead(t.row.working_state)||e.isMetaBusy(t.row.working_state))}},[e._v(e._s(e.$t("start")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionStop,expression:"showActionStop"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:!e.isMetaDead(t.row.working_state)},on:{click:function(t){return e.setModalControl("stop")}}},[s("q-item-section",{class:{"text-grey-6":e.isMetaDead(t.row.working_state)}},[e._v(e._s(e.$tc("stop",1)))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionRestart,expression:"showActionRestart"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setModalControl("restart")}}},[s("q-item-section",[e._v(e._s(e.$t("restart")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionReload,expression:"showActionReload"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setModalControl("reload")}}},[s("q-item-section",[e._v(e._s(e.$t("reload")))])],1)],1)],1)],1)],1)])]}}])},[s("TableNoData",{attrs:{slot:"no-data",filter:e.filter,loading:e.changeMetaLoading},slot:"no-data"})],1)],1),s("q-card",[s("q-table",{staticClass:"q-mt-md",attrs:{data:e.chunkList,columns:e.chunkColumns,"row-key":"css_uuid","visible-columns":e.visibleChunkColumns,loading:e.changeChunkLoading,filter:e.chunk_filter,pagination:e.chunk_pagination,"rows-per-page-label":e.$t("records_per_page")},on:{"row-click":e.onRowClick,request:e.onChunkRequest,"update:pagination":function(t){e.chunk_pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[s("h5",{staticClass:"q-my-none col-12",staticStyle:{"min-width":"150px"},attrs:{outlined:"",dense:"","options-dense":""}},[e._v("\n              "+e._s(e.$t("service.chunk_table_title"))+"\n            ")]),s("q-select",{staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$t("columns"),"emit-value":"","map-options":"",options:e.chunkColumns,"option-value":"name","options-cover":""},model:{value:e.visibleChunkColumns,callback:function(t){e.visibleChunkColumns=t},expression:"visibleChunkColumns"}}),s("q-space"),s("div",{staticClass:"q-pa-md "},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.showCreate,expression:"showCreate"}],attrs:{label:e.$t("add"),color:"primary"},on:{click:function(t){e.addChunkModalControl=!e.addChunkModalControl}}})],1)]},proxy:!0},{key:"body-cell-id",fn:function(t){return[s("q-td",{attrs:{props:t}},[e._v("\n              "+e._s(t.pageIndex+1)+"\n            ")])]}},{key:"body-cell-is_running",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("TableStateField",{attrs:{field:t.row.is_running,stateInfo:e.chunk_is_running}})],1)]}},{key:"body-cell-enable_autorun",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-toggle",{attrs:{color:"green"},on:{input:function(s){return e.setEnableAutorun(t.row,t.row.enable_autorun)}},model:{value:t.row.enable_autorun,callback:function(s){e.$set(t.row,"enable_autorun",s)},expression:"props.row.enable_autorun"}})],1)]}},{key:"body-cell-status",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("TableStateField",{attrs:{field:t.row.status,stateInfo:e.chunk_state_info}})],1)]}},{key:"body-cell-maintenance",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("TableStateField",{attrs:{field:t.row.maintenance,stateInfo:e.chunk_maintenance}})],1)]}},{key:"body-cell-space_ratio",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-linear-progress",{key:t.row.used_space,staticClass:"q-mt-sm",attrs:{rounded:"",size:"10px",color:"cyan",value:null!==e.getUsedPercent(t.row.total_space,t.row.used_space)?e.getUsedPercent(t.row.total_space,t.row.used_space):0}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col text-left"},[e._v("\n                  "+e._s(e.percentFormat(e.getUsedPercent(t.row.total_space,t.row.used_space)))+"\n                ")]),s("div",{staticClass:"col text-right"},[e._v("\n                  "+e._s(e.bytes2human(t.row.used_space))+" /\n                  "+e._s(e.bytes2human(t.row.total_space))+"\n                ")])])],1)]}},{key:"body-cell-operation",fn:function(t){return[s("q-td",{directives:[{name:"show",rawName:"v-show",value:e.showDetail||e.showDelete||e.showActionStart||e.showActionStop||e.showActionRestart||e.showActionReload||e.showActionSetLabel||e.showActionMaintenaceOn||e.showActionMaintenaceOff,expression:"\n                showDetail ||\n                  showDelete ||\n                  showActionStart ||\n                  showActionStop ||\n                  showActionRestart ||\n                  showActionReload ||\n                  showActionSetLabel ||\n                  showActionMaintenaceOn ||\n                  showActionMaintenaceOff\n              "}],attrs:{props:t}},[s("div",[s("q-btn",{staticStyle:{"background-color":"#fff"},attrs:{flat:"",color:"black",icon:"more_vert",dense:""}},[s("q-menu",[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showDetail,expression:"showDetail"}],attrs:{clickable:"",to:{name:"chunk_detail",params:{css_uuid:t.row.css_uuid}}}},[s("q-item-section",[e._v(e._s(e.$t("detail")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showDelete,expression:"showDelete"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:!e.isChunkRunning(t.row.is_running)},on:{click:function(t){return e.setModalControl("delete")}}},[s("q-item-section",{class:{"text-grey-6":e.isChunkRunning(t.row.is_running)}},[e._v(e._s(e.$t("delete")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionStart,expression:"showActionStart"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:!e.isChunkRunning(t.row.is_running)},on:{click:function(t){return e.setModalControl("start")}}},[s("q-item-section",{class:{"text-grey-6":e.isChunkRunning(t.row.is_running)}},[e._v(e._s(e.$t("start")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionStop,expression:"showActionStop"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:e.isChunkRunning(t.row.is_running)},on:{click:function(t){return e.setModalControl("stop")}}},[s("q-item-section",{class:{"text-grey-6":!e.isChunkRunning(t.row.is_running)}},[e._v(e._s(e.$tc("stop",1)))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionRestart,expression:"showActionRestart"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setModalControl("restart")}}},[s("q-item-section",[e._v(e._s(e.$t("restart")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionReload,expression:"showActionReload"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:e.isChunkRunning(t.row.is_running)},on:{click:function(t){return e.setModalControl("reload")}}},[s("q-item-section",{class:{"text-grey-6":!e.isChunkRunning(t.row.is_running)}},[e._v(e._s(e.$t("reload")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionSetLabel,expression:"showActionSetLabel"}],attrs:{clickable:""},on:{click:function(t){e.setLabelnModalControl=!e.setLabelnModalControl}}},[s("q-item-section",[e._v(e._s(e.$t("service.set_label")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionMaintenaceOn,expression:"showActionMaintenaceOn"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setModalControl("maintenance_on")}}},[s("q-item-section",[e._v(e._s(e.$t("service.set_maintenance_on")))])],1),s("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showActionMaintenaceOff,expression:"showActionMaintenaceOff"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.setModalControl("maintenance_off")}}},[s("q-item-section",[e._v(e._s(e.$t("service.set_maintenance_off")))])],1)],1)],1)],1)],1)])]}}])},[s("TableNoData",{attrs:{slot:"no-data",filter:e.chunk_filter,loading:e.changeChunkLoading},slot:"no-data"})],1)],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:e.operationModalControl,callback:function(t){e.operationModalControl=t},expression:"operationModalControl"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6 text-weight-bold"},[e._v(e._s(e.dialog_title))])]),s("q-card-section",{staticClass:"q-pt-none"},[s("span",{staticClass:"q-ml-sm"},[s("i18n",{attrs:{path:e.dialog_reconfirm}},[s("span",{staticStyle:{"font-weight":"bold"},attrs:{place:e.dialog_place}},[e._v(e._s(e.select_field))])])],1)]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.$t("cancel"),color:"orange"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.dialog_action,color:"red"},on:{click:e.serviceOperation}})],1)],1)],1),s("q-dialog",{model:{value:e.addMetaModalControl,callback:function(t){e.addMetaModalControl=t},expression:"addMetaModalControl"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("service.add_mss_title")))]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-form",{on:{submit:e.addMetaService,reset:e.onReset}},[s("q-card-section",{staticClass:"row justify-center",staticStyle:{"min-width":"400px"}},[s("div",{staticClass:"col-sm-12 col-xs-11 q-gutter-md"},[s("q-select",{attrs:{behavior:"menu",outlined:"",options:e.nodeOptions,label:e.$t("service.select_node"),dense:"",square:"",clearable:"",color:"primary","options-selected-class":"text-primary","lazy-rules":"",rules:[function(t){return t||e.$t("service.select_node_hint")}]},on:{input:e.selectNode},scopedSlots:e._u([{key:"option",fn:function(t){return[s("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[s("q-item-section",[s("q-item-label",[e._v(e._s(t.opt.label)+"\n                      "),s("span",{staticClass:"text-weight-light text-grey"},[e._v("\n                        - "+e._s(t.opt.description))])])],1)],1)]}}]),model:{value:e.form.node_option,callback:function(t){e.$set(e.form,"node_option",t)},expression:"form.node_option"}}),s("div",[s("q-select",{attrs:{behavior:"menu",outlined:"",options:e.netOptions,label:e.$t("service.select_ip"),dense:"",square:"",clearable:"",disable:!e.form.node_option,color:"primary","options-selected-class":"text-primary","lazy-rules":"",rules:[function(t){return t||e.$t("service.select_ip_hint")}]},scopedSlots:e._u([{key:"option",fn:function(t){return[s("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[s("q-item-section",[s("q-item-label",[e._v(e._s(t.opt.label)+"\n                        "),s("span",{staticClass:"text-weight-light text-grey"},[e._v("\n                          - "+e._s(t.opt.description))])])],1)],1)]}}]),model:{value:e.form.net_option,callback:function(t){e.$set(e.form,"net_option",t)},expression:"form.net_option"}}),e.form.node_option?e._e():s("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v(e._s(e.$t("service.before_select_ip_hint")))])],1),s("div",{staticClass:"text-right"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-sm no-border-radius",attrs:{outline:"",unelevated:"",label:e.$t("cancel"),type:"reset",color:"grey-6"}}),s("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",label:e.$tc("submit",1),type:"submit",color:"primary"}})],1)],1)])],1)],1)],1),s("q-dialog",{model:{value:e.addChunkModalControl,callback:function(t){e.addChunkModalControl=t},expression:"addChunkModalControl"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("service.add_css_title")))]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-form",{on:{submit:e.addChunkService,reset:e.onReset}},[s("q-card-section",{staticClass:"row justify-center",staticStyle:{"min-width":"400px"}},[s("div",{staticClass:"col-sm-12 col-xs-11 q-gutter-md"},[s("q-select",{attrs:{behavior:"menu",outlined:"",options:e.nodeOptions,label:e.$t("service.select_node"),dense:"",square:"",clearable:"",color:"primary","options-selected-class":"text-primary","lazy-rules":"",rules:[function(t){return t||e.$t("service.select_node_hint")}]},on:{input:e.selectNode},scopedSlots:e._u([{key:"option",fn:function(t){return[s("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[s("q-item-section",[s("q-item-label",[e._v(e._s(t.opt.label)+"\n                      "),s("span",{staticClass:"text-weight-light text-grey"},[e._v("\n                        - "+e._s(t.opt.description))])])],1)],1)]}}]),model:{value:e.form.node_option,callback:function(t){e.$set(e.form,"node_option",t)},expression:"form.node_option"}}),s("div",[s("q-select",{attrs:{behavior:"menu",outlined:"",options:e.netOptions,label:e.$t("service.select_ip"),dense:"",square:"",clearable:"",disable:!e.form.node_option,color:"primary","options-selected-class":"text-primary","lazy-rules":"",rules:[function(t){return t||e.$t("service.select_ip_hint")}]},scopedSlots:e._u([{key:"option",fn:function(t){return[s("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[s("q-item-section",[s("q-item-label",[e._v(e._s(t.opt.label)+"\n                        "),s("span",{staticClass:"text-weight-light text-grey"},[e._v("\n                          - "+e._s(t.opt.description))])])],1)],1)]}}]),model:{value:e.form.net_option,callback:function(t){e.$set(e.form,"net_option",t)},expression:"form.net_option"}}),e.form.node_option?e._e():s("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v(e._s(e.$t("service.before_select_ip_hint")))])],1),s("div",{staticClass:"text-right"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-sm no-border-radius",attrs:{outline:"",unelevated:"",label:e.$t("cancel"),type:"reset",color:"grey-6"}}),s("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",label:e.$tc("submit",1),type:"submit",color:"primary"}})],1)],1)])],1)],1)],1),s("q-dialog",{model:{value:e.setLabelnModalControl,callback:function(t){e.setLabelnModalControl=t},expression:"setLabelnModalControl"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("service.set_label")))]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-form",{on:{submit:e.setChunkLabel,reset:function(t){e.label=""}}},[s("q-card-section",{staticClass:"row justify-center",staticStyle:{"min-width":"400px"}},[s("div",{staticClass:"col-sm-12 col-xs-11 q-gutter-md"},[s("q-input",{staticClass:"q-pb-sm",attrs:{label:e.$t("service.input_chunk_label"),placeholder:e.$t("service.input_chunk_label_placeholder"),outlined:"",dense:"",square:"",clearable:"",rules:[function(t){return t&&t.length>0||e.$t("service.input_chunk_label_hint")}]},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}}),s("div",{staticClass:"text-right"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-sm no-border-radius",attrs:{outline:"",unelevated:"",label:e.$t("cancel"),type:"reset",color:"grey-6"}}),s("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",label:e.$tc("submit",1),type:"submit",color:"primary"}})],1)],1)])],1)],1)],1)],1)},i=[],a=s("2f62"),o=s("73ec"),r=s("7ffc"),c=s("4d91"),l=s("2ef0"),u=s.n(l),d=function(){return d=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var i in t=arguments[s],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)},p=function(e,t,s,n){function i(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,a){function o(e){try{c(n.next(e))}catch(t){a(t)}}function r(e){try{c(n["throw"](e))}catch(t){a(t)}}function c(e){e.done?s(e.value):i(e.value).then(o,r)}c((n=n.apply(e,t||[])).next())}))},h=function(e,t){var s,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(s)throw new TypeError("Generator is already executing.");while(o)try{if(s=1,n&&(i=2&a[0]?n["return"]:a[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(r){a=[6,r],n=0}finally{s=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},_={name:"ServicePage",components:{},preFetch:function(e){var t=e.store;return p(this,void 0,void 0,(function(){var e;return h(this,(function(s){return e=[t.dispatch("getMetaServices",{}),t.dispatch("getChunkServices",{}),t.dispatch("getNodeOptions")],Promise.race(e),[2]}))}))},setup:function(){var e=["id","sv_ip","sv_port","version","meta_version","working_state","sync","is_running","enable_autorun","mem_ratio"];(Object(o["b"])(r["a"].service_add)||Object(o["b"])(r["a"].service_list)||Object(o["b"])(r["a"].service_detail)||Object(o["b"])(r["a"].service_delete)||Object(o["b"])(r["a"].service_action_start)||Object(o["b"])(r["a"].service_action_stop)||Object(o["b"])(r["a"].service_action_restart)||Object(o["b"])(r["a"].service_action_reload)||Object(o["b"])(r["a"].service_action_set_auto_start))&&e.push("operation");var t=["id","sv_ip","sv_port","version","is_running","label","status","maintenance","enable_autorun","space_ratio"];return(Object(o["b"])(r["a"].service_add)||Object(o["b"])(r["a"].service_list)||Object(o["b"])(r["a"].service_detail)||Object(o["b"])(r["a"].service_delete)||Object(o["b"])(r["a"].service_action_start)||Object(o["b"])(r["a"].service_action_stop)||Object(o["b"])(r["a"].service_action_restart)||Object(o["b"])(r["a"].service_action_reload)||Object(o["b"])(r["a"].service_action_set_auto_start)||Object(o["b"])(r["a"].service_action_set_label)||Object(o["b"])(r["a"].service_action_set_maintenance_on)||Object(o["b"])(r["a"].service_action_set_maintenance_off))&&t.push("operation"),{visibleMetaColumns:e,visibleChunkColumns:t}},computed:d(d(d({},Object(a["e"])({metaList:function(e){return u.a.cloneDeep(e.services.meta_list)},chunkList:function(e){return u.a.cloneDeep(e.services.chunk_list)},nodeOptions:function(e){return e.nodes.node_options},netOptions:function(e){return e.nodes.net_options}})),Object(a["c"])(["getMetaLoading","getChunkLoading"])),{showCreate:function(){return Object(o["b"])(r["a"].service_add)},showDetail:function(){return Object(o["b"])(r["a"].service_detail)},showDelete:function(){return Object(o["b"])(r["a"].service_delete)},showActionStart:function(){return Object(o["b"])(r["a"].service_action_start)},showActionStop:function(){return Object(o["b"])(r["a"].service_action_stop)},showActionRestart:function(){return Object(o["b"])(r["a"].service_action_restart)},showActionReload:function(){return Object(o["b"])(r["a"].service_action_reload)},showActionSetLabel:function(){return Object(o["b"])(r["a"].service_action_set_label)},showActionMaintenaceOn:function(){return Object(o["b"])(r["a"].service_action_set_maintenance_on)},showActionMaintenaceOff:function(){return Object(o["b"])(r["a"].service_action_set_maintenance_off)},metaColumns:function(){var e=[{name:"id",label:"#",field:"id",align:"left",style:"width: 2%"},{name:"machine_id",label:this.$t("service.machine_id"),field:"machine_id",align:"left",style:"width: 10%"},{name:"mss_uuid",label:this.$t("service.mss_uuid"),field:"mss_uuid",align:"left",style:"width: 10%"},{name:"sv_ip",label:this.$t("service.sv_ip"),field:"sv_ip",align:"left",style:"width: 8%"},{name:"sv_port",label:this.$t("service.sv_port"),field:"sv_port",align:"center",style:"width: 6%"},{name:"version",label:this.$t("service.version"),field:"version",align:"center",style:"width: 6%"},{name:"meta_version",label:this.$t("service.meta_version"),field:"meta_version",align:"center",format:function(e){for(var t=0,s="",n=0,i=Array.from(String(e)).reverse().join("");n<i.length;n++){var a=i[n];s+=a,t+=1,3===t&&(s+=" ",t=0)}return Array.from(s).reverse().join("")},style:"width: 14%"},{name:"working_state",label:this.$t("service.working_state"),field:"working_state",align:"center",style:"width: 12%"},{name:"sync",label:this.$t("service.sync"),field:"sync",align:"center",format:function(e){return e?c["b"].t("true"):c["b"].t("false")},style:"width: 10%"},{name:"is_running",label:this.$t("service.is_running"),field:"is_running",align:"center",format:function(e){return e?c["b"].tc("running"):c["b"].tc("stop")},style:"width: 10%"},{name:"enable_autorun",label:this.$t("service.enable_autorun"),field:"enable_autorun",align:"center",style:"width: 10%"},{name:"mem_ratio",label:this.$t("service.mem_ratio"),field:"mem_usage",align:"center",style:"width: 20%"},{name:"operation",label:this.$t("operation"),field:"operation",align:"center"}];return e},chunkColumns:function(){var e=[{name:"id",label:"#",field:"id",align:"left",style:"width: 2%"},{name:"machine_id",label:this.$t("service.machine_id"),field:"machine_id",align:"left",style:"width: 10%"},{name:"css_uuid",label:this.$t("service.css_uuid"),field:"css_uuid",align:"left",style:"width: 10%"},{name:"sv_ip",label:this.$t("service.sv_ip"),field:"sv_ip",align:"left",style:"width: 8%"},{name:"sv_port",label:this.$t("service.sv_port"),field:"sv_port",align:"center",style:"width: 6%"},{name:"version",label:this.$t("service.version"),field:"version",align:"center",style:"width: 6%"},{name:"label",label:this.$t("service.label"),field:"label",align:"center",style:"width: 14%"},{name:"status",label:this.$t("service.status"),field:"status",align:"center",style:"width: 12%"},{name:"maintenance",label:this.$t("service.maintenance"),field:"maintenance",align:"center",style:"width: 10%"},{name:"is_running",label:this.$t("service.chunk_is_running"),field:"is_running",align:"center",style:"width: 10%"},{name:"enable_autorun",label:this.$t("service.enable_autorun"),field:"enable_autorun",align:"center",style:"width: 10%"},{name:"space_ratio",label:this.$t("service.space_ratio"),field:"used_space",align:"center",style:"width: 20%"},{name:"operation",label:this.$t("operation"),field:"operation",align:"center"}];return e},multipleData:function(){var e=[{icon:"icon_dashboard",to:"/dashboard"},{label:this.$t("breadCrumbs.cluster_manager"),icon:"icon_cluster_manager",to:"/cluster_manager/storage_service",call:this.refresh},{label:this.$t("breadCrumbs.service.page")}];return e},changeMetaLoading:function(){return!!this.getMetaLoading},changeChunkLoading:function(){return!!this.getChunkLoading},pagination:{get:function(){var e={page:this.pagination_data.page,rowsNumber:+this.$store.state.services.meta_total};return e},set:function(e){}},chunk_pagination:{get:function(){var e={page:this.chunk_pagination_data.page,rowsNumber:+this.$store.state.services.chunk_total};return e},set:function(e){}},isMetaDead:function(){return function(e){return"DEAD"==e}},isMetaBusy:function(){return function(e){return"BUSY"==e}},isChunkRunning:function(){var e=this;return function(t){return t===e.status}},isLegalPort:function(){return function(e){var t=/^[0-9]+$/;return!!t.test(e)&&(+e>=1e4&&+e<=65535)}},bytes2human:function(){return function(e){return Object(o["a"])(e)}},get_meta_version:function(){return function(e){for(var t=0,s="",n=0,i=Array.from(String(e)).reverse().join("");n<i.length;n++){var a=i[n];s+=a,t+=1,3===t&&(s+=" ",t=0)}return Array.from(s).reverse().join("")}},getUsedPercent:function(){return function(e,t){return t<e&&e>0&&t>=0?Math.floor(t/e*1e3)/1e3:null}},percentFormat:function(){return function(e){return null!==e?(100*e).toFixed(1)+"%":"0"}}}),data:function(){return{addMetaModalControl:!1,addChunkModalControl:!1,operationModalControl:!1,dialog_title:"",dialog_reconfirm:"",dialog_place:"",dialog_action:"",setLabelnModalControl:!1,label:"",select_field:"",action:"",selected:[],selectRow:[],updateForm:{},filter:"",chunk_filter:"",pagination_data:{page:1,rowsNumber:this.$store.state.services.meta_total},mate_auto_start:null,meta_state_info:[{state:"DUMMY",color:"orange",value:c["b"].t("service.dummy"),class:"bg-orange-1 no-border-radius",has_tip:!0,message:c["b"].t("service.dummy_hint")},{state:"LEADER",color:"green",value:c["b"].t("service.leader"),class:"bg-green-1 no-border-radius",has_tip:!0,message:c["b"].t("service.leader_hint")},{state:"ELECT",color:"green",value:c["b"].t("service.elect"),class:"bg-green-1 no-border-radius",has_tip:!0,message:c["b"].t("service.elect_hint")},{state:"FOLLOWER",color:"cyan",value:c["b"].t("service.follower_sync"),class:"bg-cyan-1 no-border-radius",has_tip:!0,message:c["b"].t("service.follower_hint")},{state:"FOLLOWER (DESYNC)",color:"blue",value:c["b"].t("service.follower_desync"),class:"bg-blue-1 no-border-radius",has_tip:!0,message:c["b"].t("service.follower_hint")},{state:"USURPER",color:"indigo",value:c["b"].t("service.usurper"),class:"bg-indigo-1 no-border-radius",has_tip:!0,message:c["b"].t("service.usurper_hint")},{state:"DEAD",color:"grey",value:c["b"].t("service.dead"),class:"bg-grey-1 no-border-radius",has_tip:!0,message:c["b"].t("service.dead_hint")},{state:"BUSY",color:"orange",name:"check_circle",has_oval:!0,value:c["b"].t("service.dummy"),class:"bg-orange-1 no-border-radius",has_tip:!0,message:c["b"].t("service.dummy_hint")}],sync_info:[{state:!0,color:"green",value:c["b"].t("service.synchronized"),class:"bg-green-1 no-border-radius"},{state:!1,color:"amber",value:c["b"].t("service.not_synchronized"),class:"bg-amber-1 no-border-radius"}],running_info:[{state:!0,color:"green",value:c["b"].tc("running",1),class:"bg-green-1 no-border-radius"},{state:!1,color:"grey",value:c["b"].tc("stop",1),class:"bg-grey-1 no-border-radius"}],chunk_pagination_data:{page:1,rowsNumber:+this.$store.state.services.chunk_total},chunk_is_running:[{state:!0,color:"green",value:c["b"].tc("running",1),class:"bg-green-1 no-border-radius"},{state:!1,color:"grey",value:c["b"].tc("stop",1),class:"bg-grey-1 no-border-radius"}],chunk_state_info:[{state:"ONLINE",color:"green",value:c["b"].tc("on",2),class:"bg-green-1 no-border-radius"},{state:"OFFLINE",color:"grey",value:c["b"].tc("off",2),class:"bg-grey-1 no-border-radius"},{state:"UNREGISTER",color:"blue",value:c["b"].t("unregistered"),class:"bg-blue-1 no-border-radius"}],chunk_maintenance:[{state:!0,color:"green",value:c["b"].tc("on",0),class:"bg-green-1 no-border-radius"},{state:!1,color:"grey",value:c["b"].tc("off",0),class:"bg-grey-1 no-border-radius"}],status:!0,form:{node_option:null,net_option:null,port:""}}},methods:d(d(d({},Object(a["d"])([])),Object(a["b"])(["getMetaServices","addMetaService","deleteMetaServiceInfo","startMetaService","stopMetaService","restartMetaService","reloadMetaService","setMetaServiceEnable","setMetaServiceDisable","getChunkServices","addChunkService","deleteChunkServiceInfo","startChunkService","stopChunkService","restartChunkService","reloadChunkService","setChunkServiceEnable","setChunkServiceDisable","setLabelService","setMaintenanceOnService","setMaintenanceOffService"])),{onRowClick:function(e,t,s){this.selectRow=t,this.$store.commit("SET_SELECT_SERVICE_ROW",t)},onRequest:function(e){return p(this,void 0,void 0,(function(){var t,s,n,i,a,o,r;return h(this,(function(c){switch(c.label){case 0:return t=e.pagination,s=t.page,n=t.rowsPerPage,i=t.sortBy,a=t.descending,o=n,0===n&&(o=100),r={offset:(s-1)*o,limit:o,sort_key:i,sort_oder:a?"desc":"asc"},[4,this.$store.dispatch("getMetaServices",r)];case 1:return c.sent(),[2]}}))}))},onChunkRequest:function(e){return p(this,void 0,void 0,(function(){var t,s,n,i,a,o,r;return h(this,(function(c){switch(c.label){case 0:return t=e.pagination,s=t.page,n=t.rowsPerPage,i=t.sortBy,a=t.descending,o=n,0===n&&(o=100),r={offset:(s-1)*o,limit:o,sort_key:i,sort_oder:a?"desc":"asc"},[4,this.$store.dispatch("getChunkServices",r)];case 1:return c.sent(),[2]}}))}))},selectNode:function(e){return p(this,void 0,void 0,(function(){var t;return h(this,(function(s){switch(s.label){case 0:return this.form.net_option=null,this.form.node_option=e,t=e.value,[4,this.$store.dispatch("getNetWorkOptions",t)];case 1:return s.sent(),[2]}}))}))},refresh:function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){return Promise.race([this.refreshMss(),this.refreshCss()]),[2]}))}))},refreshMss:function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.$store.dispatch("getMetaServices",{})];case 1:return e.sent(),this.pagination.rowsNumber=+this.$store.state.services.meta_total,[2]}}))}))},refreshCss:function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.$store.dispatch("getChunkServices",{})];case 1:return e.sent(),this.pagination.rowsNumber=+this.$store.state.services.chunk_total,[2]}}))}))},setModalControl:function(e){var t;this.operationModalControl=!0,this.action=e;var s=(null===(t=this.selectRow)||void 0===t||t.mss_uuid,this.selectRow.sv_ip+": "+this.selectRow.sv_port);switch(e){case"delete":this.dialog_title=c["b"].t("delete"),this.dialog_reconfirm="service.delete_reconfirm",this.dialog_place="service_name",this.dialog_action=c["b"].t("delete"),this.select_field=s;break;case"start":this.dialog_title=c["b"].t("start"),this.dialog_reconfirm="service.start_reconfirm",this.dialog_place="service_name",this.dialog_action=c["b"].t("start"),this.select_field=s;break;case"stop":this.dialog_title=c["b"].tc("stop",1),this.dialog_reconfirm="service.stop_reconfirm",this.dialog_place="service_name",this.dialog_action=c["b"].tc("stop",1),this.select_field=s;break;case"restart":this.dialog_title=c["b"].t("restart"),this.dialog_reconfirm="service.restart_reconfirm",this.dialog_place="service_name",this.dialog_action=c["b"].t("restart"),this.select_field=s;break;case"reload":this.dialog_title=c["b"].t("reload"),this.dialog_reconfirm="service.reload_reconfirm",this.dialog_place="service_name",this.dialog_action=c["b"].t("reload"),this.select_field=s;break;case"auto_start":this.dialog_title=c["b"].t("service.set_auto_start"),this.dialog_reconfirm="service.auto_start_reconfirm",this.dialog_place="service_name",this.dialog_action=c["b"].t("service.set_auto_start"),this.select_field=s;break;case"maintenance_on":this.dialog_title=c["b"].t("service.set_maintenance_on"),this.dialog_reconfirm="service.maintenance_on_reconfirm",this.dialog_place="service_name",this.dialog_action=c["b"].t("service.set_maintenance_on"),this.select_field=s;break;case"maintenance_off":this.dialog_title=c["b"].t("service.set_maintenance_off"),this.dialog_reconfirm="service.maintenance_off_reconfirm",this.dialog_place="service_name",this.dialog_action=c["b"].t("service.set_maintenance_off"),this.select_field=s;break}},addMetaService:function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e={machine_id:this.form.node_option.value,sv_ip:this.form.net_option.value},[4,this.$store.dispatch("addMetaService",e)];case 1:return t.sent(),this.addMetaModalControl=!1,this.onReset(),[4,this.refreshMss()];case 2:return t.sent(),[2]}}))}))},addChunkService:function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e={machine_id:this.form.node_option.value,sv_ip:this.form.net_option.value},[4,this.$store.dispatch("addChunkService",e)];case 1:return t.sent(),this.addChunkModalControl=!1,this.onReset(),[4,this.refreshCss()];case 2:return t.sent(),[2]}}))}))},setChunkLabel:function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e={css_uuid:this.selectRow.css_uuid,data:{label:this.label}},[4,this.$store.dispatch("setLabelService",e)];case 1:return t.sent(),this.setLabelnModalControl=!1,this.label="",[4,this.refreshCss()];case 2:return t.sent(),[2]}}))}))},onReset:function(){this.form={node_option:null,net_option:null,port:""}},serviceOperation:function(){var e,t,s,n,i,a,o;return p(this,void 0,void 0,(function(){var r,c;return h(this,(function(l){switch(l.label){case 0:switch(r=(null===(e=this.selectRow)||void 0===e?void 0:e.mss_uuid)?this.selectRow.mss_uuid:this.selectRow.css_uuid,c=this.action,c){case"delete":return[3,1];case"start":return[3,6];case"stop":return[3,11];case"restart":return[3,16];case"reload":return[3,21];case"maintenance_on":return[3,26];case"maintenance_off":return[3,28]}return[3,30];case 1:return(null===(t=this.selectRow)||void 0===t?void 0:t.mss_uuid)?[4,this.$store.dispatch("deleteMetaServiceInfo",r)]:[3,3];case 2:return l.sent(),[3,5];case 3:return[4,this.$store.dispatch("deleteChunkServiceInfo",r)];case 4:l.sent(),l.label=5;case 5:return[3,30];case 6:return(null===(s=this.selectRow)||void 0===s?void 0:s.mss_uuid)?[4,this.$store.dispatch("startMetaService",r)]:[3,8];case 7:return l.sent(),[3,10];case 8:return[4,this.$store.dispatch("startChunkService",r)];case 9:return l.sent(),[2];case 10:return[3,30];case 11:return(null===(n=this.selectRow)||void 0===n?void 0:n.mss_uuid)?[4,this.$store.dispatch("stopMetaService",r)]:[3,13];case 12:return l.sent(),[3,15];case 13:return[4,this.$store.dispatch("stopChunkService",r)];case 14:l.sent(),l.label=15;case 15:return[3,30];case 16:return(null===(i=this.selectRow)||void 0===i?void 0:i.mss_uuid)?[4,this.$store.dispatch("restartMetaService",r)]:[3,18];case 17:return l.sent(),[3,20];case 18:return[4,this.$store.dispatch("restartChunkService",r)];case 19:return l.sent(),[2];case 20:return[3,30];case 21:return(null===(a=this.selectRow)||void 0===a?void 0:a.mss_uuid)?[4,this.$store.dispatch("reloadMetaService",r)]:[3,23];case 22:return l.sent(),[3,25];case 23:return[4,this.$store.dispatch("reloadChunkService",r)];case 24:l.sent(),l.label=25;case 25:return[3,30];case 26:return[4,this.$store.dispatch("setMaintenanceOnService",r)];case 27:return l.sent(),[3,30];case 28:return[4,this.$store.dispatch("setMaintenanceOffService",r)];case 29:return l.sent(),[3,30];case 30:return(null===(o=this.selectRow)||void 0===o?void 0:o.mss_uuid)?[4,this.refreshMss()]:[3,32];case 31:return l.sent(),[3,34];case 32:return[4,this.refreshCss()];case 33:l.sent(),l.label=34;case 34:return[2]}}))}))},setEnableAutorun:function(e,t){return p(this,void 0,void 0,(function(){return h(this,(function(s){switch(s.label){case 0:return(null===e||void 0===e?void 0:e.mss_uuid)?t?[4,this.$store.dispatch("setMetaServiceEnable",e.mss_uuid)]:[3,2]:[3,6];case 1:return s.sent(),[3,4];case 2:return[4,this.$store.dispatch("setMetaServiceDisable",e.mss_uuid)];case 3:s.sent(),s.label=4;case 4:return[4,this.refreshMss()];case 5:return s.sent(),[3,12];case 6:return t?[4,this.$store.dispatch("setChunkServiceEnable",e.css_uuid)]:[3,8];case 7:return s.sent(),[3,10];case 8:return[4,this.$store.dispatch("setChunkServiceDisable",e.css_uuid)];case 9:s.sent(),s.label=10;case 10:return[4,this.refreshCss()];case 11:s.sent(),s.label=12;case 12:return[2]}}))}))}})},v=_,m=(s("27bb"),s("2877")),b=s("9989"),f=s("f09f"),g=s("eaac"),w=s("ddd8"),k=s("2c91"),y=s("9c40"),C=s("db86"),q=s("9564"),M=s("6b1d"),S=s("4e73"),$=s("1c1c"),x=s("66e5"),O=s("4074"),A=s("24e8"),R=s("a370"),N=s("4b7e"),j=s("0378"),L=s("0170"),D=s("05c0"),E=s("27f9"),P=s("7f67"),I=s("eebe"),Q=s.n(I),F=Object(m["a"])(v,n,i,!1,null,null,null);t["default"]=F.exports;Q()(F,"components",{QPage:b["a"],QCard:f["a"],QTable:g["a"],QSelect:w["a"],QSpace:k["a"],QBtn:y["a"],QTd:C["a"],QToggle:q["a"],QLinearProgress:M["a"],QMenu:S["a"],QList:$["a"],QItem:x["a"],QItemSection:O["a"],QDialog:A["a"],QCardSection:R["a"],QCardActions:N["a"],QForm:j["a"],QItemLabel:L["a"],QTooltip:D["a"],QInput:E["a"]}),Q()(F,"directives",{ClosePopup:P["a"]})},"27bb":function(e,t,s){"use strict";s("8d9d")},"8d9d":function(e,t,s){}}]);