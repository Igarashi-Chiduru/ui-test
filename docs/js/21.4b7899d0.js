(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"29e9":function(e,t,n){},"5cb7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sc-design"},[n("div",{staticClass:"q-px-md q-mb-lg"},[n("q-form",{ref:"registerForm",on:{submit:e.onSubmit,reset:e.onReset}},[n("div",{staticClass:"q-gutter-y-md"},[n("div",{staticClass:"text-left text-body1"},[e._v("注册")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 q-gutter-y-sm"},[n("q-input",{attrs:{outlined:"",clearable:"","clear-icon":"cancel",debounce:"1000",dense:"",placeholder:"用户名",maxlength:"32",type:"text",square:"",rules:[function(e){return e&&e.length>0||"请输入用户名"},function(e){return e&&e.length>=4||"用户名必须大于等于4位"},e.checkRegisterUsername]},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"person"}})]},proxy:!0},{key:"hint",fn:function(){return[n("div",{staticClass:"text-positive"},[e._v("\n                  "+e._s(e.registerHintData.usernameHint)+"\n                ")])]},proxy:!0}]),model:{value:e.registerData.username,callback:function(t){e.$set(e.registerData,"username",t)},expression:"registerData.username"}}),n("q-input",{attrs:{outlined:"",clearable:"","clear-icon":"cancel",type:e.isPwd?"password":"text",dense:"",debounce:"1000",placeholder:"密码",maxlength:"32",square:"",rules:[function(e){return e&&e.length>0||"请输入密码"},function(e){return e&&e.length>=6||"密码长度必须大于等于6位"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.registerData.password,callback:function(t){e.$set(e.registerData,"password",t)},expression:"registerData.password"}}),n("q-input",{attrs:{outlined:"",clearable:"","clear-icon":"cancel",type:e.isPwd?"password":"text",dense:"",debounce:"1000",placeholder:"确认密码",maxlength:"32",square:"",rules:[function(e){return e&&e.length>0||"请输入确认密码"},function(t){return e.passwordValida||"两次密码不一致"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.registerData.confirmPassword,callback:function(t){e.$set(e.registerData,"confirmPassword",t)},expression:"registerData.confirmPassword"}}),n("q-input",{attrs:{outlined:"",clearable:"","clear-icon":"cancel",debounce:"1000",dense:"",placeholder:"邮箱",maxlength:"128",type:"email",square:"",rules:[function(e){return e&&e.length>0||"请输入邮箱"},e.checkRegisterEmail]},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"mail"}})]},proxy:!0},{key:"hint",fn:function(){return[n("div",{staticClass:"text-positive"},[e._v("\n                  "+e._s(e.registerHintData.emailHint)+"\n                ")])]},proxy:!0}]),model:{value:e.registerData.email,callback:function(t){e.$set(e.registerData,"email",t)},expression:"registerData.email"}}),n("q-input",{attrs:{outlined:"",clearable:"","clear-icon":"cancel",maxlength:"11",type:"tel",dense:"",placeholder:"手机号",debounce:"1000",square:"",rules:[function(e){return e&&e.length>0||"请输入手机号"},e.checkRegisterPhone]},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-btn-dropdown",{staticStyle:{"margin-left":"-12px"},attrs:{color:"secondary",flat:"",label:e.phonePrefix}},[n("q-list",[n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.onItemClick("+86")}}},[n("q-item-section",[n("q-item-label",[e._v("+86")])],1)],1),n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.onItemClick("+87")}}},[n("q-item-section",[n("q-item-label",[e._v("+87")])],1)],1)],1)],1)]},proxy:!0},{key:"hint",fn:function(){return[n("div",{staticClass:"text-positive"},[e._v("\n                  "+e._s(e.registerHintData.phoneHint)+"\n                ")])]},proxy:!0}]),model:{value:e.registerData.phone,callback:function(t){e.$set(e.registerData,"phone",t)},expression:"registerData.phone"}}),n("q-input",{attrs:{outlined:"",clearable:"",type:"text",maxlength:"6",dense:"",placeholder:"图片验证码",square:"",debounce:"1000",rules:[function(e){return e&&e.length>0||"请输入验证码"},e.checkCaptchaVerifyCode]},scopedSlots:e._u([{key:"error",fn:function(){return[e._v("\n                Please use maximum 3 characters.\n              ")]},proxy:!0},{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"qr_code"}})]},proxy:!0},{key:"after",fn:function(){return[n("img",{staticClass:"login-code-img",staticStyle:{width:"100px"},attrs:{src:e.captchaVerifyCodeUrl},on:{click:e.getCaptchaVerifyCode}})]},proxy:!0},{key:"hint",fn:function(){return[n("div",{staticClass:"text-positive"},[e._v("\n                  "+e._s(e.registerHintData.captchaVerifyCodeHint)+"\n                ")])]},proxy:!0}]),model:{value:e.registerData.captchaVerifyCode,callback:function(t){e.$set(e.registerData,"captchaVerifyCode",t)},expression:"registerData.captchaVerifyCode"}}),n("q-input",{attrs:{outlined:"",clearable:"",type:"text",maxlength:"6",dense:"",placeholder:"邮箱验证码",debounce:"1000",square:"",rules:[function(e){return e&&e.length>0||"请输入验证码"},e.checkEmailCode]},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"attach_email"}})]},proxy:!0},{key:"after",fn:function(){return[n("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",loading:e.validateCodeLoading,color:"secondary",label:"获取验证码"},on:{click:e.getEmailVerifyCode},scopedSlots:e._u([{key:"loading",fn:function(){return[n("q-icon",{staticClass:"on-left",attrs:{name:"alarm"}}),e._v("\n                    "+e._s(e.emailCountDown)+" s\n                  ")]},proxy:!0}])})]},proxy:!0},{key:"hint",fn:function(){return[n("div",{staticClass:"text-positive"},[e._v("\n                  "+e._s(e.registerHintData.emailValidateCodeHint)+"\n                ")])]},proxy:!0}]),model:{value:e.registerData.emailValidateCode,callback:function(t){e.$set(e.registerData,"emailValidateCode",t)},expression:"registerData.emailValidateCode"}}),n("div",{staticClass:"row"},[n("div",{staticClass:"col text-left"},[n("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",type:"submit",loading:e.registerLoading,color:"primary full-width",label:"注 册",size:"md"},scopedSlots:e._u([{key:"loading",fn:function(){return[n("q-spinner-hourglass",{staticClass:"on-left"}),e._v("\n                    注册...\n                  ")]},proxy:!0}])})],1),n("div",{staticClass:"col text-right"},[n("q-btn",{attrs:{to:"/user/login",color:"primary",flat:"",label:"使用已有账户登录"}})],1)])],1)])])]),n("q-dialog",{attrs:{persistent:""},model:{value:e.successCard,callback:function(t){e.successCard=t},expression:"successCard"}},[n("q-card",{staticClass:"my-card text-center q-col-gutter-y-lg q-px-md",staticStyle:{width:"600px","max-width":"80vw"}},[n("q-icon",{staticClass:"q-mt-md text-h4",attrs:{name:"check_circle",color:"positive",size:"60px"}}),n("div",[n("div",{staticClass:"text-h6"},[e._v("\n            恭喜！账户："),n("span",[e._v(e._s(e.usernameForShow)+" ")]),e._v(" 注册成功\n          ")]),n("div",{staticClass:"text-grey"},[e._v("\n            已经为您自动登录，赶快加入QuasarSikaDesign享受极致纵享丝滑的体验吧！\n          ")])]),n("q-card-actions",{staticClass:"q-mb-md",attrs:{align:"center"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"primary",to:"/account/center",label:"个人中心"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"secondary",to:"/",label:"进入首页"}})],1)],1)],1)],1)])},i=[],r=(n("d3b7"),n("e6cf"),n("4795"),n("c24f")),s=n("d547"),o=n("2ef0"),c=n.n(o),l={name:"Register",data:function(){return{registerHintData:{usernameHint:null,emailHint:null,phoneHint:null,captchaVerifyCodeHint:null,emailValidateCodeHint:null},registerData:{username:null,email:null,password:null,confirmPassword:null,phone:null,captchaVerifyCode:null,emailValidateCode:null,emailCode:"MC_00002",captchaType:20},usernameForShow:null,phonePrefix:"+86",captchaVerifyCodeUrl:"",isPwd:!0,validateCodeLoading:!1,successCard:!1,emailCountDown:60,registerLoading:!1}},created:function(){this.getCaptchaVerifyCode()},methods:{onSubmit:function(){this.register()},onReset:function(){this.usernameForShow=this.registerData.username,this.registerData=s["a"].resetObj(this.registerData),this.registerHintData=s["a"].resetObj(this.registerHintData)},onItemClick:function(e){this.phonePrefix=e},checkRegisterUsername:function(e){var t=this;return new Promise((function(e,n){Object(r["g"])(t.registerData).then((function(n){e(!0),t.registerHintData.usernameHint="用户名可用"}))["catch"]((function(t){e(t)}))}))},checkRegisterEmail:function(e){var t=this;return new Promise((function(e,n){Object(r["e"])(t.registerData).then((function(n){e(!0),t.registerHintData.emailHint="邮箱可用"}))["catch"]((function(t){e(t)}))}))},checkRegisterPhone:function(e){var t=this;return new Promise((function(e,n){Object(r["f"])(t.registerData).then((function(n){e(!0),t.registerHintData.phoneHint="手机号可用"}))["catch"]((function(t){e(t)}))}))},checkCaptchaVerifyCode:function(e){var t=this;return new Promise((function(e,n){Object(r["b"])(t.registerData).then((function(n){e(!0),t.registerHintData.captchaVerifyCodeHint="图片验证码正确"}))["catch"]((function(t){e(t)}))}))},checkEmailCode:function(e){var t=this;return new Promise((function(e,n){Object(r["d"])(t.registerData).then((function(n){e(!0),t.registerHintData.emailValidateCodeHint="邮箱验证码正确"}))["catch"]((function(t){e(t)}))}))},getCaptchaVerifyCode:function(){var e=this;Object(r["k"])(this.registerData).then((function(t){e.captchaVerifyCodeUrl=t}))},getEmailVerifyCode:function(){var e=this;if(c.a.isEmpty(this.registerData.email))s["a"].notifyAlert("请输入邮箱");else{this.validateCodeLoading=!0;var t=setInterval((function(){e.emailCountDown--,e.emailCountDown<=0&&(e.validateCodeLoading=!1,e.emailCountDown=60,clearInterval(t))}),1e3);Object(r["q"])(this.registerData).then((function(e){s["a"].notifySuccess("验证码发发送成功")}))["catch"]((function(n){console.log(n),e.validateCodeLoading=!1,e.emailCountDown=60,clearInterval(t)}))}},register:function(e){var t=this;this.registerLoading=!0,setTimeout((function(){Object(r["p"])(t.registerData).then((function(e){t.success()}))["catch"]((function(e){console.log(e),t.registerLoading=!1}))}),1e3)},success:function(){s["a"].notifySuccess("注册成功"),this.registerLoading=!1,this.successCard=!0,this.$refs.registerForm.reset()}},computed:{passwordValida:function(){return this.registerData.password===this.registerData.confirmPassword}}},u=l,d=(n("9c90"),n("2877")),p=n("0378"),f=n("27f9"),m=n("0016"),h=n("f20b"),g=n("1c1c"),y=n("66e5"),v=n("4074"),C=n("0170"),b=n("9c40"),x=n("9149"),D=n("24e8"),w=n("f09f"),k=n("4b7e"),q=n("8572"),_=n("7f67"),H=n("eebe"),P=n.n(H),V=Object(d["a"])(u,a,i,!1,null,"33c05680",null);t["default"]=V.exports;P()(V,"components",{QForm:p["a"],QInput:f["a"],QIcon:m["a"],QBtnDropdown:h["a"],QList:g["a"],QItem:y["a"],QItemSection:v["a"],QItemLabel:C["a"],QBtn:b["a"],QSpinnerHourglass:x["a"],QDialog:D["a"],QCard:w["a"],QCardActions:k["a"],QField:q["a"]}),P()(V,"directives",{ClosePopup:_["a"]})},"9c90":function(e,t,n){"use strict";n("29e9")}}]);