(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"51b7":function(e,t,a){"use strict";a.r(t);for(var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sc-design"},[e._m(0),a("div",{staticClass:"q-pt-md q-mx-md"},[a("q-card",{staticClass:"q-gutter-y-md q-pb-md",attrs:{square:"",flat:""}},[a("q-form",[a("div",{staticClass:"row q-gutter-y-sm q-pt-sm"},[a("q-item",{staticClass:"col-xl-3 col-sm-6 col-xs-12"},[a("q-item-section",{staticClass:"col-2 text-right gt-sm"},[a("q-item-label",[e._v("规则名称:")])],1),a("q-item-section",{staticClass:"col"},[a("q-input",{attrs:{outlined:"",label:"规则名称",dense:"",square:"",clearable:""},model:{value:e.queryCondition.ruleName,callback:function(t){e.$set(e.queryCondition,"ruleName",t)},expression:"queryCondition.ruleName"}})],1)],1),a("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"col-xl-3 col-sm-6 col-xs-12"},[a("q-item-section",{directives:[{name:"show",rawName:"v-show",value:e.$q.screen.gt.sm,expression:"$q.screen.gt.sm"}],staticClass:"col-2 text-right"},[a("q-item-label",[e._v("描述:")])],1),a("q-item-section",{staticClass:"col"},[a("q-input",{attrs:{outlined:"",label:"描述",dense:"",square:"",clearable:""},model:{value:e.queryCondition.desc,callback:function(t){e.$set(e.queryCondition,"desc",t)},expression:"queryCondition.desc"}})],1)],1),a("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"col-xl-3 col-sm-6 col-xs-12"},[a("q-item-section",{directives:[{name:"show",rawName:"v-show",value:e.$q.screen.gt.sm,expression:"$q.screen.gt.sm"}],staticClass:"col-2 text-right"},[e._v("\n              调用次数:\n            ")]),a("q-item-section",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"col"},[a("q-input",{attrs:{outlined:"",label:"服务调用次数",dense:"",square:"",clearable:""},model:{value:e.queryCondition.callCount,callback:function(t){e.$set(e.queryCondition,"callCount",t)},expression:"queryCondition.callCount"}})],1)],1),a("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"col-xl-3 col-sm-6 col-xs-12"},[a("q-item-section",{directives:[{name:"show",rawName:"v-show",value:e.$q.screen.gt.sm,expression:"$q.screen.gt.sm"}],staticClass:"col-2 text-right"},[a("q-item-label",[e._v("状态:")])],1),a("q-item-section",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"col"},[a("q-select",{attrs:{behavior:"menu",outlined:"","options-dense":"",options:e.tableListData.stateValue,label:"状态",dense:"",square:"",clearable:""},model:{value:e.queryCondition.state,callback:function(t){e.$set(e.queryCondition,"state",t)},expression:"queryCondition.state"}})],1)],1),a("q-item",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"col-xl-3 col-sm-6 col-xs-12"},[a("q-item-section",{directives:[{name:"show",rawName:"v-show",value:e.$q.screen.gt.sm,expression:"$q.screen.gt.sm"}],staticClass:"col-2 text-right"},[a("q-item-label",[e._v("时间:")])],1),a("q-item-section",{directives:[{name:"show",rawName:"v-show",value:e.showQuery,expression:"showQuery"}],staticClass:"col"},[a("q-input",{attrs:{outlined:"",label:"上次调度时间",dense:"",square:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-menu",{attrs:{square:"",offset:[12,10],"transition-show":"jump-down","transition-hide":"jump-up"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm","today-btn":""},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[""!==e.queryDate?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){e.queryDate=""}}}):e._e(),a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-menu",{attrs:{square:"",offset:[12,10],"transition-show":"jump-down","transition-hide":"jump-up"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.queryCondition.callNextTime,callback:function(t){e.$set(e.queryCondition,"callNextTime",t)},expression:"queryCondition.callNextTime"}})],1)],1),a("q-item",{staticClass:"col-xl-3 col-sm-6 col-xs-12 q-pr-sm"},[a("q-item-label",{staticClass:"col-12 text-right"},[a("q-btn",{staticClass:"q-mr-sm no-border-radius",attrs:{outline:"",unelevated:"",label:"重置",color:"secondary"},on:{click:e.resetQuery}}),a("q-btn",{staticClass:"q-mr-sm no-border-radius",attrs:{unelevated:"",label:"查询",color:"primary",loading:e.queryLoad},on:{click:e.doQuery},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-ios",{staticClass:"on-center"})]},proxy:!0}])}),a("q-btn-dropdown",{attrs:{persistent:"",dense:"",flat:"",color:"primary",label:e.tableLabel},on:{"before-show":e.show,"before-hide":e.hide},model:{value:e.showQuery,callback:function(t){e.showQuery=t},expression:"showQuery"}})],1)],1)],1)]),a("q-card",{staticClass:"row q-mt-lg"},[a("div",{staticClass:"col"},[a("q-table",{staticClass:"my-sticky-header-table",attrs:{square:"",flat:"","title-class":"text-body1",color:"primary",data:e.filterListData,columns:e.tableListData.tableListDatas.columns,"visible-columns":e.visibleColumns,"row-key":"id","selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected,pagination:e.pagination,"hide-selected-banner":"","virtual-scroll":"",loading:e.loading},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top-left",fn:function(){return[a("div",[a("q-btn",{staticClass:"q-mr-sm no-border-radius",attrs:{label:"新建",color:"primary",icon:"add",unelevated:""},on:{click:e.addRow}})],1)]},proxy:!0},{key:"top-right",fn:function(t){return[a("div",[a("q-btn",{attrs:{rounded:"",flat:"",dense:"",size:"md",icon:"refresh"}},[a("q-tooltip",[e._v("刷新")])],1),a("q-btn",{attrs:{rounded:"",flat:"",dense:"",size:"md",icon:"unfold_less"}},[a("q-tooltip",[e._v("密度")])],1),a("q-btn",{attrs:{rounded:"",flat:"",dense:"",size:"md",icon:"settings"}},[a("q-menu",{attrs:{offset:[0,12]}},[a("q-list",{attrs:{dense:""}},e._l(e.showColumns,(function(t,s){return a("q-item",{key:s,attrs:{clickable:"",active:t.check},on:{click:function(a){return e.select(t)}}},[a("q-item-section",[e._v(e._s(t.label))])],1)})),1)],1)],1),a("q-btn",{attrs:{rounded:"",flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}},[a("q-tooltip",[e._v("全屏")])],1)],1)]}},{key:"pagination",fn:function(t){return[a("div",{staticClass:"full-width"},[a("q-pagination",{staticClass:"float-right",attrs:{color:"primary",max:t.pagesNumber,size:"sm","max-pages":4,"boundary-numbers":!1,"boundary-links":!0},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)]}}])}),a("q-inner-loading",{attrs:{showing:e.queryLoad}},[a("q-spinner-ios",{attrs:{size:"40px",color:"primary"}})],1)],1)]),a("q-dialog",{model:{value:e.addData,callback:function(t){e.addData=t},expression:"addData"}},[a("q-card",{staticStyle:{width:"600px"},attrs:{square:""}},[a("q-toolbar",[a("q-icon",{attrs:{name:"post_add",size:"md"}}),a("q-toolbar-title",{staticClass:"text-body1"},[e._v("新建规则")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("div",{staticClass:"q-px-md"},[a("form",{ref:"addDataForm",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.onSubmit(t)},reset:function(t){return t.preventDefault(),t.stopPropagation(),e.onReset(t)}}},[a("div",{staticClass:"q-gutter-sm q-ma-sm"},[a("q-item-label",[a("span",{staticClass:"q-mr-xs text-red"},[e._v("*")]),e._v("规则名称\n                ")]),a("q-input",{ref:"ruleName",attrs:{placeholder:"请输入",outlined:"",dense:"",square:"",rules:[function(e){return e&&e.length>0||"请输入规则名称"}],clearable:""},model:{value:e.ruleName,callback:function(t){e.ruleName=t},expression:"ruleName"}})],1),a("div",{staticClass:"q-gutter-sm q-ma-sm"},[a("q-item-label",[e._v("描述")]),a("q-input",{attrs:{type:"textarea",outlined:"",placeholder:"请输入",square:""},model:{value:e.ruleName,callback:function(t){e.ruleName=t},expression:"ruleName"}})],1),a("div",{staticClass:"q-gutter-sm q-ma-sm q-mb-lg"},[a("q-btn",{staticClass:"q-mr-sm no-border-radius",attrs:{outline:"",unelevated:"",label:"重置",type:"reset",color:"secondary"}}),a("q-btn",{staticClass:"no-border-radius",attrs:{unelevated:"",type:"submit",label:"提交",color:"primary"}})],1)])])],1)],1),a("q-dialog",{attrs:{"full-width":"",seamless:"",position:"bottom"},model:{value:e.seamless,callback:function(t){e.seamless=t},expression:"seamless"}},[a("q-card",{staticClass:"q-mx-sm"},[a("q-card-section",{staticClass:"row"},[a("div",{staticClass:"col-sm-6 col-xs-12 q-mb-sm"},[a("div",[e._v("\n                已选择"),a("span",{staticClass:"text-weight-bold text-blue-8 q-mx-xs"},[e._v(e._s(e.selected.length)+" ")]),e._v("项 服务调用次数总计"),a("span",{staticClass:"q-mx-xs"},[e._v(e._s(e.selectedTotal)+" ")]),e._v("万\n              ")])]),a("div",{staticClass:"text-right col-sm-6 col-xs-12 q-gutter-x-sm"},[a("q-btn",{attrs:{unelevated:"",color:"warning",label:"批量删除"},on:{click:e.deleteDatas}}),a("q-btn",{attrs:{unelevated:"",color:"primary",label:"批量审批"}})],1)])],1)],1)],1)],1)])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-white text-h6 q-pa-md"},[a("strong",[e._v("查询表格")])])}],i=(a("99af"),a("a434"),a("6eba"),a("0d03"),a("b0c0"),a("ac1f"),a("841c"),a("4795"),a("bd4c")),o=a("d9b2"),n=a("d547"),r=a("24b9"),c=["配置收付款","配置费用","配置服务器","配置权限"],u=["关闭","运行中","已上线","异常"],d=["这条规则不错","等待确认","运行完美"],m={ruleName:null,desc:null,callCount:null,state:null,callNextTime:null},p={columns:[{check:!0,name:"ruleName",required:!0,label:"规则名称",align:"left",field:"ruleName",format:function(e){return"".concat(e)}},{check:!0,name:"state",align:"left",label:"状态",field:"state"},{check:!0,name:"callCount",align:"left",label:"调用次数(万)",field:"callCount",sortable:!0,sort:function(e,t){return e-t}},{check:!0,name:"callNextTime",label:"上次调用时间",align:"left",field:"callNextTime",sortable:!0,sort:function(e,t){return i["b"].extractDate(e,"YYYY-MM-DD HH:mm:ss")-i["b"].extractDate(t,"YYYY-MM-DD HH:mm:ss")}},{check:!0,name:"desc",align:"left",label:"描述",field:"desc"}],datas:[]},q=0;q<35;++q)p.datas.push({id:q,ruleName:n["a"].getRandomData(c),state:n["a"].getRandomData(u),callCount:n["a"].getRandomCeilInt(100),callNextTime:i["b"].formatDate(r["a"].buildRandomDate(2020),"YYYY-MM-DD HH:mm:ss"),desc:n["a"].getRandomData(d)});var h={queryCondition:m,stateValue:u,tableListDatas:p},b={name:"TableList",data:function(){return{tableListData:h,filterListData:[],queryCondition:h.queryCondition,queryLoad:!1,ruleName:null,addData:!1,queryDate:i["b"].formatDate(Date.now(),"YYYY-MM-DD HH:mm"),showQuery:!0,seamless:!1,loading:!1,tableLabel:"展开",selected:[],pagination:{descending:!1,page:1,rowsPerPage:5},visibleColumns:["ruleName","state","callCount","callNextTime","desc"]}},methods:{show:function(e){this.showQuery=!0,this.tableLabel="收起"},hide:function(e){this.showQuery=!1,this.tableLabel="展开"},getSelectedString:function(){return 0===this.selected.length?"":"选择："+"".concat(this.selected.length," / ").concat(this.data.length)},deleteDatas:function(){var e=this;console.log(JSON.stringify(this.selected));var t=o["a"];this.$q.loading.show({spinner:t,spinnerSize:"40px",spinnerColor:"blue",backgroundColor:"white",message:"正在删除...",messageColor:"blue"}),setTimeout((function(){for(var t=0;t<e.selected.length;++t){console.log(JSON.stringify(e.selected[t]));for(var a=0;a<e.tableListData.tableListDatas.datas.length;++a)if(e.selected[t].id===e.tableListData.tableListDatas.datas[a].id){e.tableListData.tableListDatas.datas.splice(a,1);break}}e.$q.loading.hide(),e.$q.notify({color:"white",textColor:"positive",icon:"check_circle",position:"top",group:!1,message:"成功删除【"+e.selected.length+"】条数据，即将刷新"}),e.selected=[]}),1e3)},select:function(e){this.visibleColumns=[];for(var t=this.tableListData.tableListDatas.columns,a=0;a<t.length;++a)t[a].name===e.name&&(t[a].check=!t[a].check),t[a].check&&(this.visibleColumns[a]=t[a].name)},onSubmit:function(){var e=this;if(this.$refs.ruleName.validate()){var t=o["a"];this.$q.loading.show({spinner:t,spinnerColor:"blue",spinnerSize:"40px",backgroundColor:"white",message:"添加规则...",messageColor:"blue"}),setTimeout((function(){e.$q.loading.hide(),e.addData=!1,e.$refs.addDataForm.reset(),e.$q.notify({color:"white",textColor:"positive",icon:"check_circle",position:"top",message:"添加成功"})}),1e3)}},onReset:function(){this.ruleName=null},resetQuery:function(){this.queryCondition={}},doQuery:function(){var e=this;this.queryLoad=!0,setTimeout((function(){e.queryLoad=!1,e.filterListData=[];for(var t=e.tableListData.tableListDatas.datas,a=0;a<t.length;++a){var s=t[a];e.isMatchData(s)&&e.filterListData.push(s)}}),500)},isMatchData:function(e){var t=this.queryCondition,a=!1;console.log(a),t.ruleName&&-1===e.ruleName.search(t.ruleName)||(a=!0);var s=!1;t.desc&&-1===e.desc.search(t.desc)||(s=!0);var l=!1;return t.state&&e.state!==t.state||(l=!0),a&&s&&l},addRow:function(){this.addData=!0}},computed:{pagesNumber:function(){return Math.ceil(this.data.length/this.pagination.rowsPerPage)},selectedTotal:function(){var e=0;if(!this.selected||0===this.selected.length)return e;for(var t=0;t<this.selected.length;++t)e+=this.selected[t].callCount;return e},showColumns:function(){for(var e=[],t=0;t<this.tableListData.tableListDatas.columns.length;++t){var a=this.tableListData.tableListDatas.columns[t];a.required||e.push(a)}return e}},mounted:function(){this.showQuery=this.$q.screen.gt.xs,this.tableLabel=this.$q.screen.gt.xs?"收起":"展开"},watch:{selected:function(e,t){this.seamless=e.length>0},tableListData:{handler:function(e,t){this.doQuery()},immediate:!0,deep:!0}}},f=b,v=a("2877"),g=a("f09f"),y=a("0378"),w=a("66e5"),C=a("4074"),x=a("0170"),D=a("27f9"),k=a("ddd8"),Q=a("0016"),N=a("4e73"),L=a("52ee"),_=a("9c40"),$=a("ca78"),Y=a("f20b"),T=a("eaac"),S=a("05c0"),M=a("1c1c"),H=a("3b16"),R=a("74f7"),z=a("24e8"),I=a("65c6"),P=a("6ac5"),j=a("a370"),F=a("7f67"),J=a("eebe"),O=a.n(J),B=Object(v["a"])(f,s,l,!1,null,null,null);t["default"]=B.exports;O()(B,"components",{QCard:g["a"],QForm:y["a"],QItem:w["a"],QItemSection:C["a"],QItemLabel:x["a"],QInput:D["a"],QSelect:k["a"],QIcon:Q["a"],QMenu:N["a"],QDate:L["a"],QBtn:_["a"],QTime:$["a"],QSpinnerIos:o["a"],QBtnDropdown:Y["a"],QTable:T["a"],QTooltip:S["a"],QList:M["a"],QPagination:H["a"],QInnerLoading:R["a"],QDialog:z["a"],QToolbar:I["a"],QToolbarTitle:P["a"],QCardSection:j["a"]}),O()(B,"directives",{ClosePopup:F["a"]})}}]);